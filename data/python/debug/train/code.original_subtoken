def reorder suite suite classes reverse False class count len classes suite class type suite bins [ Ordered Set for i in range class count + 1 ]partition suite by type suite classes bins reverse reverse reordered suite suite class for i in range class count + 1 reordered suite add Tests bins[i] return reordered suite
def first value try return value[ 0 ]except Index Error return u''
def setup platform hass config add devices callback discovery info None import RF Xtrx as rfxtrxmodswitches rfxtrx get devices from config config Rfxtrx Switch add devices callback switches def switch update event ' Callbackforsensorupdatesfromthe RF Xtrxgateway 'if not isinstance event device rfxtrxmod Lighting Device or event device known to be dimmable or event device known to be rollershutter returnnew device rfxtrx get new device event config Rfxtrx Switch if new device add devices callback [new device] rfxtrx apply received command event if switch update not in rfxtrx RECEIVED EVT SUBSCRIBERS rfxtrx RECEIVED EVT SUBSCRIBERS append switch update
def expand probes probes defaults expected probes {}for probe name probe test in six iteritems probes if probe name not in expected probes keys expected probes[probe name] {}probe defaults probe test pop 'defaults' {} for test name test details in six iteritems probe test test defaults test details pop 'defaults' {} expected test details deepcopy defaults expected test details update probe defaults expected test details update test defaults expected test details update test details if test name not in expected probes[probe name] keys expected probes[probe name][test name] expected test detailsreturn expected probes
def test records test data ds Chart Data Source from data test data records data assert len ds columns 2 assert len ds index 4
def attach total voters to queryset queryset as field 'total voters' model queryset modeltype apps get model 'contenttypes' ' Content Type' objects get for model model sql 'SELEC Tcoalesce SUM total voters 0 FROM \n SELEC Tcoalesce votes votes count 0 total voters\n FRO Mvotes votes\n WHER Evotes votes content type id {type id}\n AN Dvotes votes object id {tbl} id\n ase'sql sql format type id type id tbl model meta db table qs queryset extra select {as field sql} return qs
def add theming locales theme locale paths settings COMPREHENSIVE THEME LOCALE PATH Sfor locale path in theme locale paths settings LOCALE PATHS + path locale path
def guess autoescape template name if template name is None or ' ' not in template name return Falseext template name rsplit ' ' 1 [1 ]return ext in ['html' 'htm' 'xml']
def path to filesystem root *paths paths [sanitize path path strip '/' for path in paths]safe path rootfor path in paths if not path continuefor part in path split '/' if not is safe filesystem path component part raise Unsafe Path Error part safe path os path join safe path part return safe path
def open filepath *args **kwargs if not os path exists filepath filepath os path join ' ' filepath return open filepath 'rb' *args **kwargs
def open pathname pathname verbose 0 try refno Res FS Open Resource File pathname u'' 1 except Res Error as arg if arg[ 0 ] -199 raiseelse return refnopathname decode pathname verbose verbose refno Res FS Open Resource File pathname u'' 1
def delete policy vhost name runas None if runas is None and not salt utils is windows runas salt utils get user res salt ['cmd run all'] [ context ['rabbitmqctl'] 'clear policy' '-p' vhost name] runas runas python shell False log debug ' Deletepolicy {0 }' format res['stdout'] return format response res ' Deleted'
def get Rectangular Grid diameter loops Complex maximum Complex minimum Complex zigzag demiradius 0 25 * diameter x Start minimum Complex real - demiradius real y minimum Complex imag - demiradius imag grid Path []row Index 0while y < maximum Complex imag add Grid Row diameter grid Path loops Complex maximum Complex row Index x Start y zigzag y + diameter imagrow Index + 1return grid Path
def write Output file Name '' print ''print ' Thebottomtoolisparsingthefile 'print os path basename file Name print ''start Time time time file Name Suffix file Name[ file Name rfind ' ' ] + ' bottom svg' craft Text skeinforge craft get Chain Text file Name 'bottom' if craft Text '' returnarchive write File Text file Name Suffix craft Text print ''print ' Thebottomtoolhascreatedthefile 'print file Name Suffixprint ''print ' Ittook%stocraftthefile ' % euclidean get Duration String time time - start Time repository Bottom Repository settings get Read Repository repository settings open SVG Page file Name Suffix repository svg Viewer value
def capture screenshot for step step when if world auto capture screenshots scenario num step scenario feature scenarios index step scenario + 1 step num step scenario steps index step + 1 step func name step defined at function func nameimage name '{prefix 03 d} {num 03 d} {name} {postfix}' format prefix scenario num num step num name step func name postfix when world capture screenshot image name
def run vcs tool path action info get vcs info get vcs root path tools info['actions'][action]for tool args in tools if programs find program tool programs run program tool args cwd path returnelse cmdnames [name for name args in tools]raise Action Tool Not Found info['name'] action cmdnames
def submit rescore entrance exam for student request usage key student None only if higher False check entrance exam problems for rescoring usage key task type 'rescore problem if higher' if only if higher else 'rescore problem' task class rescore problem task input task key encode entrance exam and student input usage key student task input update {'only if higher' only if higher} return submit task request task type task class usage key course key task input task key
@pytest fixture scope u'session' def celery config return {}
def synchronous tlockname def synched func @wraps func def synchronizer self *args **kwargs tlock getattr self tlockname logger debug 'acquiringlock%rfor%s' % tlockname func name with tlock logger debug 'acquiredlock%rfor%s' % tlockname func name result func self *args **kwargs logger debug 'releasinglock%rfor%s' % tlockname func name return resultreturn synchronizerreturn synched
def quota destroy all by project context project id return IMPL quota destroy all by project context project id
def get date time format dt string valid formats ['%I %M %S%p' '%I %M%p' '%H %M %S' '%H %M' '%Y-%m-%d' '%m-%d-%y' '%m-%d-%Y' '%m/%d/%y' '%m/%d/%Y' '%Y/%m/%d']for dt format in valid formats try datetime strptime dt string dt format return dt formatexcept Value Error continuereturn False
def install p K Queue Reactor from twisted internet main import install Reactorinstall Reactor p
def make path result r t rpath '/recipes/' + r tpath '/tasks/' + t return rpath + tpath + '/results/'
def index s3 redirect default URL f 'alert'
def strategy saturation largest first G colors distinct colors {v set for v in G}for i in range len G if i 0 node max G key G degree yield node for v in G[node] distinct colors[v] add 0 else saturation {v len c for v c in distinct colors items if v not in colors }node max saturation key lambda v saturation[v] G degree v yield node color colors[node]for v in G[node] distinct colors[v] add color
def initgroups uid gid if not pwd returnusername pwd getpwuid uid [0 ]if hasattr os u'initgroups' return os initgroups username gid groups [gr gr gid for gr in grp getgrall if username in gr gr mem ]setgroups groups
def Set Wsdl Method ns wsdl Name input MM wsdl Method N Ss add ns cur MM wsdl Method Map get ns wsdl Name if isinstance input MM list if cur MM is None wsdl Method Map[ ns wsdl Name ] input M Mreturn input M Melif isinstance cur MM list raise Runtime Error ' Duplicatewsdlmethod%s%s newclass%svsexisting%s ' % ns wsdl Name input MM[ 0 ] cur MM[ 0 ] else return cur M Melif cur MM is None or isinstance cur MM list wsdl Method Map[ ns wsdl Name ] input M Mreturn input M Melse return cur MM
def escape byte string s s replace specials s try return s decode 'ASCII' except Unicode Decode Error passif IS PYTHON 3 s new bytearray append extend s new append s new extend for b in s if b > 128 extend '\\% 3 o' % b encode 'ASCII' else append b return s new decode 'ISO- 8859 - 1 ' else l []append l appendfor c in s o ord c if o > 128 append '\\% 3 o' % o else append c return join bytes l decode 'ISO- 8859 - 1 '
def S white simple x if x ndim 1 x x[ None]return np dot x T x
def contains name value ret {'name' name 'result' False 'comment' '' 'changes' {}}if name not in reg ret['result'] Falseret['comment'] ' Value{ 0 }notinregister' format name return rettry if value in reg [name]['val'] ret['result'] Trueexcept Type Error passreturn ret
def find matching indices tree bin X left mask right mask left index np searchsorted tree bin X & left mask right index np searchsorted tree bin X right mask side 'right' return left index right index
def disconnect session session session['client'] auth logout session['key']
@pytest mark django dbdef test verify user empty email trans member with pytest raises Email Address Does Not Exist Email Address objects get user trans member assert trans member email '' with pytest raises Validation Error accounts utils verify user trans member with pytest raises Email Address Does Not Exist Email Address objects get user trans member
def fix line ending content return content replace '\r\n' '\n' replace '\r' '\n'
def assert equal none logical line start re re compile 'assert Equal\\ *? \\s+ None\\ $' end re re compile 'assert Equal\\ None ' if start re search logical line or end re search logical line yield 0 'N 318 assert Equal A None orassert Equal None A sentencesnotallowed Useassert Is None A instead ' start re re compile 'assert Is Not ?\\ None ' end re re compile 'assert Is Not ?\\ * \\s+ None\\ $' if start re search logical line or end re search logical line yield 0 'N 318 assert Is Not A None orassert Is Not None A mustnotbeused Useassert Is None A orassert Is Not None A instead '
def split query query qq query split '' keywords []accum Nonefor kw in qq if accum is None if kw startswith '"' accum kw[ 1 ]elif kw keywords append kw else accum + '' + kw if kw endswith '"' keywords append accum[ 0 -1 ] accum Noneif accum is not None keywords append accum return [kw strip for kw in keywords if kw strip ]
@ ensure existsdef run name cmd output None no start False stdin None python shell True preserve state False output loglevel 'debug' ignore retcode False use vt False keep env None orig state state name exc Nonetry ret salt ['container resource run'] name cmd container type virtualname exec driver EXEC DRIVER output output no start no start stdin stdin python shell python shell output loglevel output loglevel ignore retcode ignore retcode use vt use vt keep env keep env except Exception raisefinally if preserve state and orig state 'stopped' and state name 'stopped' stop name if output in None 'all' return retelse return ret[output]
def file url path return Q Url from Local File path to String Q Url Fully Encoded
def convert params exception Value Error error 400 request cherrypy serving requesttypes request handler callable annotations with cherrypy HTTP Error handle exception error for key in set types intersection request params request params[key] types[key] request params[key]
def get timeslice slice seconds now int time time slice count now // slice seconds slice start int slice count * slice seconds slice end slice start + slice seconds return Time Slice slice start slice end
def safe split estimator X y indices train indices None if hasattr estimator 'kernel' and callable estimator kernel and not isinstance estimator kernel GP Kernel raise Value Error ' Cannotuseacustomkernelfunction Precomputethekernelmatrixinstead ' if not hasattr X 'shape' if getattr estimator ' pairwise' False raise Value Error ' Precomputedkernelsoraffinitymatriceshavetobepassedasarraysorsparsematrices ' X subset [X[idx] for idx in indices]elif getattr estimator ' pairwise' False if X shape[ 0 ] X shape[ 1 ] raise Value Error ' Xshouldbeasquarekernelmatrix' if train indices is None X subset X[np ix indices indices ]else X subset X[np ix indices train indices ]else X subset safe indexing X indices if y is not None y subset safe indexing y indices else y subset Nonereturn X subset y subset
def cx Uniform ind 1 ind 2 indpb size min len ind 1 len ind 2 for i in xrange size if random random < indpb ind 1 [i] ind 2 [i] ind 2 [i] ind 1 [i] return ind 1 ind 2
def reverse ordering ordering tuple def invert x return x[ 1 ] if x startswith u'-' else u'-' + x return tuple [invert item for item in ordering tuple]
def get boost obj boost max log 10 1 + get popularity obj 1 0 if obj status in VALID STATUSES boost * BOOST MULTIPLIER FOR PUBLIC CONTEN Treturn boost
def guarded mul left right if not isinstance left numbers Integral passelif not isinstance right numbers Integral passelif left in 0 1 or right in 0 1 passelif left bit length + right bit length > 664386 raise Value Error u' Valueistoolargetobehandledinlimitedtimeandmemory ' return operator mul left right
def build or pattern patterns name None escape False or pattern []for pattern in patterns if not or pattern or pattern append ' ?' if name or pattern append 'P<' + name + '>' else or pattern append ' ' else or pattern append ' ' or pattern append ' ? %s ' % re escape pattern if escape else pattern or pattern append ' ' return '' join or pattern
def main parser argparse Argument Parser description ' Ansibledynamicinventory' parser add argument '--list' help ' Ansibleinventoryofallofthegroups' action 'store true' dest 'list inventory' parser add argument '--host' help ' Ansibleinventoryofaparticularhost' action 'store' dest 'ansible host' type str cli args parser parse args list inventory cli args list inventoryansible host cli args ansible hostif list inventory output list inventory ANSIBLE INV if ansible host find host ansible host HOST VARS
def with primary max staleness selection primary selection primarysds []for s in selection server descriptions if s server type SERVER TYPE RS Secondary staleness s last update time - s last write date - primary last update time - primary last write date + selection heartbeat frequency if staleness < max staleness sds append s else sds append s return selection with server descriptions sds
@handle response format@treeio login requireddef task time slot start request task id response format 'html' task get object or 404 Task pk task id if not request user profile has permission task mode 'x' return user denied request message " Youdon'thaveaccesstothis Task" if not task is being done by request user profile task time slot Task Time Slot task task time from datetime now user request user profile task time slot save task time slot set user from request request return Http Response Redirect reverse 'projects task view' args [task id]
def get bootstrap sample x y num reps combined hstack [x y] total obs len combined num x len x for i in range num reps indices randint 0 total obs total obs sampled combined take indices sampled x sampled[ num x]sampled y sampled[num x ] yield sampled x sampled y
def get integration manager global integration managerif not integration manager from reviewboard integrations models import Integration Config integration manager Integration Manager Integration Config return integration manager
def get config value request key default search in settings True value request session get key request COOKIES get key if value is None if search in settings value getattr settings key default else value defaultif isinstance default int try value int value except Value Error value request session[key] int default return value
def define name default None type None help None metavar None multiple False group None callback None return options define name default default type type help help metavar metavar multiple multiple group group callback callback
def check Netaddr Works With Prefixlen net prefixlen version if net & prefixlen To Netmask prefixlen version net return 1else return 0
def list servers backend socket '/var/run/haproxy sock' objectify False ha conn get conn socket ha cmd haproxy cmds list Servers backend backend return ha conn send Cmd ha cmd objectify objectify
def patch os patch module 'os'
def recursive walk path wildcard files []directories [path]while len directories > 0 directory directories pop for name in os listdir directory fullpath os path join directory name if os path isfile fullpath if re search wildcard name files append fullpath elif os path isdir fullpath directories append fullpath return files
def file hash load fnd gitfs salt utils gitfs Git FS opts gitfs init remotes opts ['gitfs remotes'] PER REMOTE OVERRIDES PER REMOTE ONLY return gitfs file hash load fnd
def cxxflags contains value return var contains 'CXXFLAGS' value
@builtin u' Swapthecaseoftext' swapcase apply func to match groups def replace swapcase match number file name metadata dictionaries data functions *args **kwargs return apply func to match groups match swapcase
def solve P Q U V structure None P U + V Q - U + V if isspmatrix U return spsolve Q P elif structure is None return solve Q P elif structure UPPER TRIANGULAR return solve triangular Q P else raise Value Error 'unsupportedmatrixstructure ' + str structure
@register tagdef firstof parser token bits token split contents [1 ]asvar Noneif len bits < 1 raise Template Syntax Error "'firstof'statementrequiresatleastoneargument" if len bits > 2 and bits[ -2 ] 'as' asvar bits[ -1 ]bits bits[ -2 ]return First Of Node [parser compile filter bit for bit in bits] asvar
def recover request uidb 64 None token None User Model get user model try uid force text urlsafe base 64 decode uidb 64 user User Model default manager get pk uid except Type Error Value Error Overflow Error User Model Does Not Exist user Noneif user and default token generator check token user token temp pwd uuid uuid 4 hexuser set password temp pwd user save user authenticate username user username password temp pwd user set unusable password user save login request user return redirect 'users recover done' return render request 'users/recover failed html'
@publicdef sqf norm f *gens **args options allowed flags args ['polys'] try F opt poly from expr f *gens **args except Polification Failed as exc raise Computation Failed 'sqf norm' 1 exc s g r F sqf norm if not opt polys return Integer s g as expr r as expr else return Integer s g r
def is task visible context task if context is admin return Trueif task['owner'] is None return Trueif context owner is not None if context owner task['owner'] return Truereturn False
def correlation X Y condition None **kwargs return covariance X Y condition **kwargs / std X condition **kwargs * std Y condition **kwargs
def backup get all by volume context volume id filters None return IMPL backup get all by volume context volume id filters filters
def volume up hass hass services call DOMAIN SERVICE VOLUME UP
def remove Endpoints pixel Table layer Extrusion Width paths removed Endpoints around Width for removed Endpoint Index in xrange len removed Endpoints - 1 -1 -1 removed Endpoint removed Endpoints[removed Endpoint Index]removed Endpoint Point removed Endpoint pointif is Point Added Around Closest pixel Table layer Extrusion Width paths removed Endpoint Point around Width removed Endpoints remove removed Endpoint
def tgrep conjunction action s l tokens join char u'&' tokens [x for x in tokens if x join char ]if len tokens 1 return tokens[ 0 ]else return lambda ts lambda n m None l None all predicate n m l for predicate in ts tokens
@task@cmdopts [ 'name ' 'n' ' Runspecifictests ' ] def test integration options reset call task 'start geoserver' info ' Geo Nodeisnowavailable runningthetestsnow ' name options get 'name' 'geonode tests integration' success Falsetry if name 'geonode tests csw' call task 'start' sh 'sleep 30 ' call task 'setup data' sh 'pythonmanage pytest%s--noinput--liveserver localhost 8000 ' % name except Build Failure as e info ' Testsfailed %s' % str e else success Truefinally stop reset if not success sys exit 1
def norm x x np asarray x nrm 2 linalg get blas funcs ['nrm 2 '] [x] return nrm 2 x
def dict diff d1 d2 d1 keys set d1 keys d2 keys set d2 keys both d1 keys & d2 keys missing in d1 []missing in d2 []different []for k in both if isinstance d1 [k] dict and isinstance d2 [k] dict missing in v1 missing in v2 different in v dict diff d1 [k] d2 [k] missing in d1 extend ['{ 0 } {1 }' format k m for m in missing in v1 ] missing in d2 extend ['{ 0 } {1 }' format k m for m in missing in v2 ] for child k left right in different in v different append '{ 0 } {1 }' format k child k left right continueif d1 [k] d2 [k] different append k d1 [k] d2 [k] missing in d1 extend d2 keys - both missing in d2 extend d1 keys - both return missing in d1 missing in d2 different
def set cache over settings destination setting key prefix value ttl existing destination settings get setting {} existing update value set cache key prefix + ' ' + setting value ttl destination settings[setting] value
def to bytes seq b bytearray for item in seq b append item return bytes b
def Shutdown Threads data source thread thread pool logger info ' Anerroroccurred Shuttingdown ' data source thread exit flag Truethread pool Shutdown data source thread join timeout 3 0 if data source thread is Alive logger warn '%shungwhiletryingtoexit' data source thread Get Friendly Name
def get single name url module required getter u' version ' mod get version module module name url version getter getattr mod getter if hasattr version getter u' call ' current version getter else current version getterreturn name url current required
def with Class classname namespace '' classattr '%s class' % namespace if namespace else 'class' return with Attribute **{classattr classname}
def shutdown delay 0 message None cmd ['shutdown' '-i' '5 ' '-g' delay '-y']if message cmd append message ret salt ['cmd run'] cmd python shell False return ret
def prio Sort elements random shuffle elements prio elems [ get Priority e e for e in elements]prio elems sort sorted elems [s for s in prio elems]return sorted elems
def openshift builder registry xml parent data osb XML Sub Element xml parent 'com openshift jenkins plugins pipeline Open Shift Builder' mapping [ 'api-url' 'api URL' 'https //openshift default svc cluster local' 'bld-cfg' 'bld Cfg' 'frontend' 'namespace' 'namespace' 'test' 'auth-token' 'auth Token' '' 'commit-ID' 'commit ID' '' 'verbose' 'verbose' False 'build-name' 'build Name' '' 'show-build-logs' 'show Build Logs' False ]convert mapping to xml osb data mapping fail required True
def setup sidebar items data if data allow sidebar items frappe db sql u'update`tab Portal Menu Item`setenabled 0' frappe db sql u'update`tab Portal Menu Item`setenabled 1\n DCTB DCTB DCTB whereroutein {0 } ' format u' ' join [u'"{ 0 }"' format d for d in data allow sidebar items] if data remove sidebar items frappe db sql u'update`tab Portal Menu Item`setenabled 1' frappe db sql u'update`tab Portal Menu Item`setenabled 0\n DCTB DCTB DCTB whereroutein {0 } ' format u' ' join [u'"{ 0 }"' format d for d in data remove sidebar items]
def gen password alphabet 'abcdefghijklmnopqrstuvwxyz 0123456789 ABCDEFGHIJKLMNOPQRSTUVWXYZ'password ''for in range 20 next index random randrange len alphabet password + alphabet[next index]hashed pwd gen hash 'salt' password 'sha 512 ' return password hashed pwd
def get action libs abs path pack None entry point None entry point abs path get entry point abs path pack pack entry point entry point if entry point abs path is not None return os path join os path dirname entry point abs path ACTION LIBS DIR else return None
def libvlc video set deinterlace p mi psz mode f Cfunctions get 'libvlc video set deinterlace' None or Cfunction 'libvlc video set deinterlace' 1 1 None None Media Player ctypes c char p return f p mi psz mode
def api handle error with json handler def api handle error with json wrapper fn request *args **kwargs try return handler request *args **kwargs except Permission Denied raiseexcept Http 404 raiseexcept Exception as e logger error ' Errorin JSO Nview {}' format request path traceback print exc return Json Response Message Error ' Unexpectederror % err s' % {'err' e} status 500 return api handle error with json wrapper fn
def download **kwargs kwargs['direction'] DOWNLOA Dreturn scp **kwargs
def set Basic Logger DEBUG set Logger Class Basic Logger Basic Logger set Level DEBUG
def get sandbox python path inherit from parent True inherit parent virtualenv True sandbox python path []parent python path os environ get 'PYTHONPATH' '' parent python path parent python path split ' ' parent python path [path for path in parent python path if path]if inherit from parent sandbox python path extend parent python path if inherit parent virtualenv and hasattr sys 'real prefix' site packages dir get python lib assert sys prefix in site packages dir sandbox python path append site packages dir sandbox python path ' ' join sandbox python path sandbox python path ' ' + sandbox python path return sandbox python path
def slug is numerical slug try float slug except Value Error return Falsereturn True
def set key value profile None comps key split '?' path comps[ 0 ]key comps[ 1 ]return salt utils vault write path key value profile profile
def get Parameter name index args kwargs default None param kwargs get name if len args > index if param raise Value Error " Parameter'%s'isspecifiedtwice" % name param args[index]return param or default
def create security group call None kwargs None global netconnif not netconn netconn get conn Network Management Client if kwargs is None kwargs {}if kwargs get 'location' is None kwargs['location'] get location if kwargs get 'resource group' is None kwargs['resource group'] config get cloud config value 'resource group' {} opts search global True if kwargs get 'name' is None kwargs['name'] config get cloud config value 'name' {} opts search global True group params Network Security Group location kwargs['location'] netconn network security group create or update rource group name kwargs['resource group'] network security group name kwargs['name'] parameters group params count 0while True try return show security group kwargs kwargs except Cloud Error count + 1if count > 120 raise Value Error ' Timedoutwaitingforoperationtocomplete ' time sleep 5
def device portnumber enum comm Comm Port Identifier get Port Identifiers ports []while enum has More Elements el enum next Element if el get Port Type comm Comm Port Identifier PORT SERIAL ports append el return ports[portnumber] get Name
def assert in obj in None out None if in is not None for name in in assert name in obj if out is not None for name in out assert name not in obj
@box types Set def box set typ val c inst setobj Set Instance c context c builder typ val obj inst parentres cgutils alloca once value c builder obj with c builder if else cgutils is not null c builder obj as has parent otherwise with has parent c pyapi incref obj with otherwise payload inst payload ok listobj native set to python list typ payload c with c builder if then ok likely True obj c pyapi set new listobj c pyapi decref listobj c builder store obj res c context nrt decref c builder typ val return c builder load res
def get New Repository return Interpret Repository
def dominating set G start with None all nodes set G if start with is None start with arbitrary element all nodes if start with not in G raise nx Network X Error 'node{}isnotin G' format start with dominating set {start with}dominated nodes set G[start with] remaining nodes all nodes - dominated nodes - dominating set while remaining nodes v remaining nodes pop undominated neighbors set G[v] - dominating set dominating set add v dominated nodes undominated neighborsremaining nodes - undominated neighborsreturn dominating set
def remove small objects ar min size 64 connectivity 1 in place False check dtype supported ar if in place out arelse out ar copy if min size 0 return outif out dtype bool selem ndi generate binary structure ar ndim connectivity ccs np zeros like ar dtype np int 32 ndi label ar selem output ccs else ccs outtry component sizes np bincount ccs ravel except Value Error raise Value Error ' Negativevaluelabelsarenotsupported Tryrelabelingtheinputwith`scipy ndimage label`or`skimage morphology label` ' if len component sizes 2 warn ' Onlyonelabelwasprovidedto`remove small objects` Didyoumeantouseabooleanarray?' too small component sizes < min size too small mask too small[ccs]out[too small mask] 0return out
def get redirect url course key usage key course key chapter section vertical unused position final target id path to location modulestore usage key if chapter is None redirect url reverse 'courseware' args unicode course key elif section is None redirect url reverse 'courseware chapter' args unicode course key chapter elif position is None redirect url reverse 'courseware section' args unicode course key chapter section else redirect url reverse 'courseware position' args unicode course key chapter section navigation index position redirect url + '?{}' format urlencode {'activate block id' unicode final target id } return redirect url
def disable term protect name call None if call 'action' raise Salt Cloud System Exit ' Thedisable term protectactionmustbecalledwith-aor--action ' return toggle term protect name 'false'
def test cnn fit cnn Condensed Nearest Neighbour random state RND SEED cnn fit X Y assert equal cnn min c 0 assert equal cnn maj c 2 assert equal cnn stats c [0 ] 2 assert equal cnn stats c [1 ] 6 assert equal cnn stats c [2 ] 12
def prepend root dir opts path options root dir os path abspath opts['root dir'] root opt opts['root dir'] rstrip os sep for path option in path options if path option in opts path opts[path option]if path root opt or path startswith root opt + os sep path path[len root opt ]opts[path option] salt utils path join root dir path
def set X window properties win id **properties import xcb xcb xprotoconn xcb connect atoms {name conn core Intern Atom False len name name for name in properties}utf 8 string atom Nonefor name val in properties iteritems atom atoms[name] reply atomtype atom xcb xproto Atom STRIN Gif isinstance val unicode if utf 8 string atom is None utf 8 string atom conn core Intern Atom True len 'UTF 8 STRING' 'UTF 8 STRING' reply atomtype atom utf 8 string atomval val encode u'utf- 8 ' conn core Change Property Checked xcb xproto Prop Mode Replace win id atom type atom 8 len val val conn flush conn disconnect
def from sequence seq partition size None npartitions None seq list seq if npartitions and not partition size partition size int math ceil len seq / npartitions if npartitions is None and partition size is None if len seq < 100 partition size 1else partition size int len seq / 100 parts list partition all partition size seq name 'from sequence-' + tokenize seq partition size d dict name i list part for i part in enumerate parts return Bag d name len d
def get Host By Name name timeout None effort 10 return get Resolver get Host By Name name timeout effort
def get fragments phase frags return [ 3 - x % 3 % 3 for x in get fragments coord frags ]
def add mock hadoop output parts output subdir get mock dir 'output' iso now for i part in enumerate parts part path os path join output subdir 'part-% 05 d' % i with open part path 'wb' as part file part file write part
@register assignment tag takes context False def assignment explicit no context arg return 'assignment explicit no context- Expectedresult %s' % arg
def get form model converter base class form Base Form only None exclude None field args None allow pk False extra fields None result model form model base class base class only only exclude exclude field args field args allow pk allow pk converter converter if extra fields for name field in iteritems extra fields setattr result name form recreate field field return result
def belongs to folder path file Name if not path endswith os path sep path + os path sepreturn file Name startswith path
def resource view clear context data dict model context['model'] check access 'resource view clear' context data dict view types data dict get 'view types' model Resource View delete all view types model repo commit
def validipport port try assert 0 < int port < 65535 except Assertion Error Value Error return Falsereturn True
def floyd warshall predecessor and distance G weight 'weight' from collections import defaultdictdist defaultdict lambda defaultdict lambda float 'inf' for u in G dist[u][u] 0pred defaultdict dict undirected not G is directed for u v d in G edges data True e weight d get weight 1 0 dist[u][v] min e weight dist[u][v] pred[u][v] uif undirected dist[v][u] min e weight dist[v][u] pred[v][u] vfor w in G for u in G for v in G if dist[u][v] > dist[u][w] + dist[w][v] dist[u][v] dist[u][w] + dist[w][v] pred[u][v] pred[w][v]return dict pred dict dist
def Pickle To File records outfile encoded records []for record in records encoded record Encode encoded records append encoded pickle dump encoded records outfile protocol pickle HIGHEST PROTOCOL
def scal elemwise with nfunc nfunc nin nout def construct symbol symbolname symbol name inplace symbolname endswith ' inplace' if inplace msg 'inplace'else msg 'no inplace'n ' Elemwise{%s %s}' % symbolname msg if inplace scalar op getattr scal symbolname[ - len ' inplace' ] inplace scalar op scalar op class scal transfer type 0 rval elemwise Elemwise inplace scalar op {0 0} name n nfunc spec nfunc and nfunc nin nout else scalar op getattr scal symbolname rval elemwise Elemwise scalar op name n nfunc spec nfunc and nfunc nin nout if getattr symbol ' doc ' False rval doc symbol doc + '\n' + rval doc rval epydoc as Routine symbolrval module 'tensor'pprint assign rval printing Function Printer symbolname return rvalreturn construct
def get complete paths config page input path os path join config[u'docs dir'] page input path output path os path join config[u'site dir'] page output path return input path output path
def auth profile None if profile credentials salt ['config option'] profile user credentials['keystone user']password credentials['keystone password']tenant credentials['keystone tenant']auth url credentials['keystone auth url']region name credentials get 'keystone region name' None service type credentials['keystone service type']else user salt ['config option'] 'keystone user' password salt ['config option'] 'keystone password' tenant salt ['config option'] 'keystone tenant' auth url salt ['config option'] 'keystone auth url' region name salt ['config option'] 'keystone region name' service type salt ['config option'] 'keystone service type' kwargs {'username' user 'password' password 'tenant name' tenant 'auth url' auth url 'region name' region name 'service type' service type}return suoneu Salt Neutron **kwargs
def enqueue *args **kwargs import frappe utils background jobsfrappe utils background jobs enqueue *args **kwargs
def user email return User objects get email email
def get qualifier module qualifier Noneif module params['version'] > 0 qualifier str module params['version'] elif module params['alias'] qualifier str module params['alias'] return qualifier
def show legend ax leg ax legend loc 1 shadow True fancybox True labelspacing 0 2 borderpad 0 15 ltext leg get texts llines leg get lines frame leg get frame from matplotlib artist import setpsetp ltext fontsize 'small' setp llines linewidth 1
def patch time from gevent hub import sleep time import 'time' time sleep sleep
@contextfunctiondef documents document list context documents skip group False request context['request']response format 'html'if 'response format' in context response format context['response format']return Markup render to string 'documents/tags/document list' {'documents' documents 'skip group' skip group} context instance Request Context request response format response format
@contextfunctiondef modules header block context request context['request'] modules active get modules request for module in modules module title module title response format 'html'if 'response format' in context response format context['response format']return Markup render to string 'core/tags/modules header block' {'modules' modules 'active' active 'request' request} response format response format
@register filter is safe False def length is value arg try return len value int arg except Value Error Type Error return ''
def load pickle fname with get file obj fname 'rb' as fin return c Pickle load fin
@utils no 4byte paramsdef metadef namespace update context namespace id namespace dict session None session session or get session return metadef namespace api update context namespace id namespace dict session
def trim var var value makeconf get makeconf old value get var var if old value is not None salt ['file sed'] makeconf value '' limit var new value get var var return {var {'old' old value 'new' new value}}
def strip math s remove '\\mathdefault' '\\rm' '\\cal' '\\tt' '\\it' '\\' '{' '}' s s[ 1 -1 ]for r in remove s s replace r '' return s
def display ctl chars index cc title ' Special Character'col 1 width len title col 2 width max map len index values FMT '{idx <{col 1 width}}{name <{col 2 width}}{value}'print ' Specialline Characters' center 40 rstrip print FMT format idx ' Index' name ' Name' value ' Value' col 1 width col 1 width col 2 width col 2 width print '{ 0 }{ 1 }{ 2 }' format '-' * col 1 width '-' * col 2 width '-' * 10 for index name name in index items try index getattr termios index name value cc[index]if value '\xff' value ' POSIX VDISABLE'else value repr value except Attribute Error value 'undef'print FMT format idx index name name name value value col 1 width col 1 width col 2 width col 2 width print
def set Last Refresh ex List cache db con db DB Connection 'cache db' cache db con upsert 'scene exceptions refresh' {'last refreshed' int time mktime datetime datetime today timetuple } {'list' ex List}
def diversity first front first last df hypot first front[ 0 ] fitness values[ 0 ] - first[ 0 ] first front[ 0 ] fitness values[ 1 ] - first[ 1 ] dl hypot first front[ -1 ] fitness values[ 0 ] - last[ 0 ] first front[ -1 ] fitness values[ 1 ] - last[ 1 ] dt [hypot first fitness values[ 0 ] - second fitness values[ 0 ] first fitness values[ 1 ] - second fitness values[ 1 ] for first second in zip first front[ -1 ] first front[ 1 ] ]if len first front 1 return df + dl dm sum dt / len dt di sum abs d i - dm for d i in dt delta df + dl + di / df + dl + len dt * dm return delta
def handle sec error error exception class None if error 0 returncf error string Security Sec Copy Error Message String error null output CF Helpers cf string to unicode cf error string Core Foundation CF Release cf error string if output is None or output u'' output u'OS Status%s' % error if exception class is None exception class OS Errorraise exception class output
def flag file path flag create False path os path join path JOB ADMIN path os path join path flag if create try f open path 'w' f write 'ok\n' f close return Trueexcept IO Error return Falseelse return os path exists path
def infinibox required together return [['user' 'password']]
def generate group title group return group name replace ' ' '' title
def data spider path ignore Value Error Not Implemented Error followlinks True hidden False extra kwargs None return {os path basename path spider path ignore ignore followlinks followlinks hidden hidden extra kwargs extra kwargs }
def test ee bad ratio ratio -1 0 ee Easy Ensemble ratio ratio assert raises Value Error ee fit X Y ratio 100 0ee Easy Ensemble ratio ratio assert raises Value Error ee fit X Y ratio 'rnd'ee Easy Ensemble ratio ratio assert raises Value Error ee fit X Y ratio [0 5 0 5]ee Easy Ensemble ratio ratio assert raises Value Error ee fit X Y
def strict dependencies target dep context for declared in resolve aliases target if isinstance declared dep context compiler plugin types for r in declared closure bfs True **dep context target closure kwargs yield r else yield declared
def validate exps in collection are public collection for exploration id in collection exploration ids if rights manager is exploration private exploration id raise utils Validation Error ' Cannotreferenceaprivateexplorationwithinapubliccollection exploration ID %s' % exploration id
@with setup prepare stdout def test output snippets with groups within single quotes colorful runner Runner feature name 'single-quoted-snippet' verbosity 3 no color False runner run assert stdout lines u"\n\x 1 b[ 1 37 m Feature single-quotedsnippetproposal\x 1 b[ 1 30 m#tests/functional/output features/single-quoted-snippet/single-quoted-snippet feature 1\x 1 b[ 0 m\n\n\x 1 b[ 1 37 m Scenario Proposematchedgroups\x 1 b[ 1 30 m#tests/functional/output features/single-quoted-snippet/single-quoted-snippet feature 2\x 1 b[ 0 m\n\x 1 b[ 0 33 m Given Ihave'stuffhere'and'more@#$%\u 02 c 6 &bizarsutffh 3 r 3 '\x 1 b[ 1 30 m#tests/functional/output features/single-quoted-snippet/single-quoted-snippet feature 3\x 1 b[ 0 m\n\n\x 1 b[ 1 37 m 1 feature \x 1 b[ 0 31 m 0 passed\x 1 b[ 1 37 m \x 1 b[ 0 m\n\x 1 b[ 1 37 m 1 scenario \x 1 b[ 0 31 m 0 passed\x 1 b[ 1 37 m \x 1 b[ 0 m\n\x 1 b[ 1 37 m 1 step \x 1 b[ 0 33 m 1 undefined\x 1 b[ 1 37 m \x 1 b[ 1 32 m 0 passed\x 1 b[ 1 37 m \x 1 b[ 0 m\n\n\x 1 b[ 0 33 m Youcanimplementstepdefinitionsforundefinedstepswiththesesnippets \n\n#-*-coding utf- 8 -*-\nfromlettuceimportstep\n\n@step u' Given Ihave\\' [^\\']* \\'and\\' [^\\']* \\'' \ndefgiven i have group 1 and group 2 step group 1 group 2 \nassert False ' Thisstepmustbeimplemented'\x 1 b[ 0 m\n"
def task info get task id global DAT Atry task info DATA['task info'][task id]except Key Error msg LW ' Couldnotfindtaskinfo%s' % task id LOG warn msg raise exception Task Not Found task id task id return task info
def extract views from urlpatterns urlpatterns base '' namespace None views []for p in urlpatterns if hasattr p 'url patterns' try patterns p url patternsexcept Import Error continueviews extend extract views from urlpatterns patterns base + p regex pattern namespace or [] + p namespace and [p namespace] or [] elif hasattr p 'callback' try views append p callback base + p regex pattern namespace p name except View Does Not Exist continueelse raise Type Error '%sdoesnotappeartobeaurlpatternobject' % p return views
def ts to str timestamp date datetime datetime fromtimestamp timestamp date string date strftime '%d/%m/%Y%H %M%Z' return date string
def node ports graph node portinputs {}portoutputs {}for u d in graph in edges iter node data True for src dest in d[u'connect'] portinputs[dest] u src for v d in graph out edges iter node data True for src dest in d[u'connect'] if isinstance src tuple srcport src[ 0 ]else srcport srcif srcport not in portoutputs portoutputs[srcport] []portoutputs[srcport] append v dest src return portinputs portoutputs
def patfilter names pat result []if pat not in pat cache pat cache[pat] re compile translate pattern pat match pat cache[pat] matchreturn filter match names
def equate Polar Dot Azimuth point return Value equate Cylindrical Dot Azimuth point return Value
def destroy name call None if call 'function' raise Salt Cloud System Exit ' Thedestroyactionmustbecalledwith-d --destroy -aor--action ' utils ['cloud fire event'] 'event' 'destroyinginstance' 'salt/cloud/{ 0 }/destroying' format name args {'name' name} sock dir opts ['sock dir'] transport opts ['transport'] name name split ' ' [0 ]node show instance name call 'action' conn get conn service ' Soft Layer Ticket' response conn create Cancel Server Ticket {'id' node['id'] 'reason' ' Salt Cloud Hardware Server Cancellation' 'content' ' Pleasecancelthisserver' 'cancel Associated Items' True 'attachment Type' 'HARDWARE'} utils ['cloud fire event'] 'event' 'destroyedinstance' 'salt/cloud/{ 0 }/destroyed' format name args {'name' name} sock dir opts ['sock dir'] transport opts ['transport'] if opts get 'update cachedir' False is True utils ['cloud delete minion cachedir'] name active provider name split ' ' [0 ] opts return response
def pack o stream **kwargs packer Packer **kwargs stream write packer pack o
@pytest fixture scope u'class' params [u'internal' u'guessit'] ids [u'internal' u'guessit'] autouse True def config request newconfig Template request cls config render {u'parser' request param} assert request cls config newconfig u'configparameterizationdidnothing?'return newconfig
def build server url *args **kwargs return urljoin get server url **kwargs *args
@pytest mark networkdef test uninstall editable from svn script tmpdir result script pip 'install' '-e' '%s#egg initools-dev' % local checkout 'svn+http //svn colorstudy com/INI Tools/trunk' tmpdir join 'cache' result assert installed 'INI Tools' result 2 script pip 'uninstall' '-y' 'initools' assert script venv / 'src' / 'initools' in result 2 files after assert all changes result result 2 [ script venv / 'src' script venv / 'build' script site packages / 'easy-install pth' ]
def get Simple Patterns num Ones num Patterns num Cols num Ones * num Patterns p []for i in xrange num Patterns x numpy zeros num Cols dtype 'float 32 ' x[ i * num Ones i + 1 * num Ones ] 1p append x return p
def toposort data if len data 0 returnfor k v in data items v discard k extra items in deps reduce set union data values - set data keys data update {item set for item in extra items in deps} while True ordered sorted set item for item dep in data items if len dep 0 if not ordered breakfor item in ordered yield item data pop item None for dep in sorted data values dep - set ordered if len data 0 msg u' Cyclicdependenciesexistamongtheseitems {}'raise Conda Value Error msg format u'->' join repr x for x in data keys
def which path jail None chroot None root None origin False quiet False opts ''if quiet opts + 'q'if origin opts + 'o'cmd pkg jail chroot root cmd append 'which' if opts cmd append '-' + opts cmd append path return salt ['cmd run'] cmd output loglevel 'trace' python shell False
def Ynm c n m theta phi from sympy import conjugatereturn conjugate Ynm n m theta phi
def valuestodict key dict {}size winreg Query Info Key key [1 ]for i in range size data winreg Enum Value key i dict[data[ 0 ]] data[ 1 ]return dict
def fd f return f fileno if hasattr f 'fileno' else f
def sync engines saltenv 'base' return salt utils extmods sync opts 'engines' saltenv saltenv [0 ]
def wrap traceback traceback if email format 'html' try from pygments import highlightfrom pygments lexers import Python Traceback Lexerfrom pygments formatters import Html Formatterwith pygments Trueexcept Import Error with pygments Falseif with pygments formatter Html Formatter noclasses True wrapped highlight traceback Python Traceback Lexer formatter else wrapped '<pre>%s</pre>' % traceback else wrapped tracebackreturn wrapped
def deserialize contributors node user dicts auth validate False contribs []for contrib dict in user dicts fullname contrib dict['fullname']visible contrib dict['visible']email contrib dict get 'email' if validate is True fullname sanitize strip html fullname if not fullname raise Validation Value Error ' Fullnamefieldcannotbeempty' if email validate email email if contrib dict['id'] contributor User load contrib dict['id'] else try contributor User create unregistered fullname fullname email email contributor save except Validation Error contributor get user email email if not contributor is registered and node primary key not in contributor unclaimed records contributor add unclaimed record node node referrer auth user given name fullname email email contributor save contribs append {'user' contributor 'visible' visible 'permissions' expand permissions contrib dict get 'permission' } return contribs
@register simple tagdef disqus id for obj return u'%s-%s' % obj meta object name obj id
def test ast good raise can compile u' raise ' can compile u' raise Exception ' can compile u' raisee '
def is type factory type def inner x if type x type raise Value Error " Valuemusthavetype'%s'" % str type return inner
def exp create database db name demo lang user password 'admin' login 'admin' country code None logger info ' Createdatabase`%s` ' db name create empty database db name initialize db id db name demo lang user password login country code return True
def ipexec validate fname expected out expected err '' options None commands import nose tools as nt out err ipexec fname options commands if err if expected err nt assert equal '\n' join err strip splitlines '\n' join expected err strip splitlines else raise Value Error ' Runningfile%rproducederror %r' % fname err nt assert equal '\n' join out strip splitlines '\n' join expected out strip splitlines
def maybe convert ix *args ixify Truefor arg in args if not isinstance arg np ndarray list ABC Series Index ixify Falseif ixify return np ix *args else return args
def dumps obj skipkeys False ensure ascii True check circular True allow nan True cls None indent None separators None encoding 'utf- 8 ' default None use decimal True **kw if not skipkeys and ensure ascii and check circular and allow nan and cls is None and indent is None and separators is None and encoding 'utf- 8 ' and default is None and use decimal and not kw return default encoder encode obj if cls is None cls JSON Encoderreturn cls skipkeys skipkeys ensure ascii ensure ascii check circular check circular allow nan allow nan indent indent separators separators encoding encoding default default use decimal use decimal **kw encode obj
def get language bidi return gettext language dir translation get language 'rtl'
@gen coroutinedef Get UDID Timestamps merged store files last seen {}for f in files contents yield gen Task merged store Get f dev list json loads contents for entry in dev list timestamp entry['timestamp']device dict entry['request'] get 'device' entry['request'] get 'device dict' None if not device dict continueudid device dict get 'test udid' None if not udid continueprev seen last seen get udid 0 if timestamp > prev seen last seen[udid] timestampraise gen Return last seen
def wrap callable wrapper fn if hasattr fn ' name ' return update wrapper wrapper fn else f wrapper f name fn class name if hasattr fn ' module ' f module fn module if hasattr fn call ' doc ' and fn call doc f doc fn call doc elif fn doc f doc fn doc return f
@depends HAS ESX CLI def get coredump network config host username password protocol None port None esxi hosts None cmd 'systemcoredumpnetworkget'ret {}if esxi hosts if not isinstance esxi hosts list raise Command Execution Error "'esxi hosts'mustbealist " for esxi host in esxi hosts response salt utils vmware esxcli host username password cmd protocol protocol port port esxi host esxi host if response['retcode'] 0 ret update {esxi host {' Error' response get 'stdout' }} else ret update {esxi host {' Coredump Config' format coredump stdout response }} else response salt utils vmware esxcli host username password cmd protocol protocol port port if response['retcode'] 0 ret update {host {' Error' response get 'stdout' }} else stdout format coredump stdout response ret update {host {' Coredump Config' stdout}} return ret
def live screenshot registry xml parent data live XML Sub Element xml parent 'org jenkinsci plugins livescreenshot Live Screenshot Build Wrapper' live set 'plugin' 'livescreenshot' mapping [ 'full-size' 'fullscreen Filename' 'screenshot png' 'thumbnail' 'thumbnail Filename' 'screenshot-thumb png' ]convert mapping to xml live data mapping fail required True
def markmin escape text return regex markmin escape sub lambda m '\\' + m group 0 replace '\\' '\\\\' text
def pickle String I stringi return unpickle String I stringi getvalue stringi tell
def get value return value if callable value else value
def random name size 6 chars string ascii uppercase + string digits return 'test-' + '' join random choice chars for x in range size
def connect to region region name **kw params for region in regions if region name region name return region connect **kw params return None
def search python list python code template names retval set for tn in template names retval update search python python code tn return sorted retval
def libvlc vlm show media p instance psz name f Cfunctions get 'libvlc vlm show media' None or Cfunction 'libvlc vlm show media' 1 1 string result ctypes c void p Instance ctypes c char p return f p instance psz name
@cmddef clean recursive rm '$testfn*' '* bak' '* core' '* egg-info' '* orig' '* pyc' '* pyd' '* pyo' '* rej' '* so' '* ~' '* pycache ' ' coverage' ' tox' safe rmtree 'build' safe rmtree ' coverage' safe rmtree 'dist' safe rmtree 'docs/ build' safe rmtree 'htmlcov' safe rmtree 'tmp'
def ca items s if atomp items return itemsif len s 0 return items[ 0 ]lst [0 ] * s[ 0 ] stride len items // s[ 0 ] if s[ 0 ] else 0 for i in range s[ 0 ] start i * stride lst[i] ca items[start start + stride ] s[ 1 ] return lst
def has arithmetic operator line for operator in pep 8 ARITHMETIC OP if operator in line return Truereturn False
def encode value *args **kwargs kwargs setdefault 'separators' ' ' ' ' return json dumps value *args **kwargs replace '</' '<\\/'
def build Name Cache show None with name Cache Lock sickbeard scene exceptions retrieve exceptions if not show for show in sickbeard show List build Name Cache show else clear Cache show indexerid for cur Season in [ -1 ] + sickbeard scene exceptions get scene seasons show indexerid for name in set sickbeard scene exceptions get scene exceptions show indexerid season cur Season + [show name] name sickbeard helpers full sanitize Scene Name name if name in name Cache continuename Cache[name] int show indexerid
def abs file for m in sys modules values if hasattr m ' loader ' continuetry m file os path abspath m file except Attribute Error continue
def wait for fun fun timeout 900 **kwargs start time time log debug ' Attemptingfunction{ 0 }' format fun trycount 0while True trycount + 1try response fun **kwargs if not isinstance response bool return responseexcept Exception as exc log debug ' Caughtexceptioninwait for fun {0 }' format exc time sleep 1 log debug ' Retryingfunction{ 0 }on try{ 1 } ' format fun trycount if time time - start > timeout log error ' Functiontimedout {0 }' format timeout return False
def get xmodule urls pipeline js settings settings PIPELINE JS['module-js']if settings DEBUG paths [path replace ' coffee' ' js' for path in pipeline js settings['source filenames']]else paths [pipeline js settings['output filename']]return [staticfiles storage url path for path in paths]
@step STEP PREFIX + 'sendingemaildoesnotwork' def email broken step mail Email Message send broken send
def templates for host templates if not isinstance templates list tuple templates [templates]theme dir host theme path host templates []if theme dir for template in templates host templates append u'%s/templates/%s' % theme dir template host templates append template return host templatesreturn templates
def api translate name output kwargs return report output keyword 'value' data Tx kwargs get 'value' ''
def make icindervolumemanager tests client factory class Tests I Cinder Volume Manager Tests Mixin Test Case def set Up self super Tests self set Up self client client factory test case self return Tests
@open file 0 mode 'r' def read p2 g path encoding 'utf- 8 ' lines line decode encoding for line in path G parse p2 g lines return G
def as float X variable if isinstance variable float return np cast[theano config float X] variable if isinstance variable np ndarray return np cast[theano config float X] variable return theano tensor cast variable theano config float X
@documented contextmanagerdef hide *groups return set output groups False
def replace network acl entry network acl id None rule number None protocol None rule action None cidr block None egress None network acl name None icmp code None icmp type None port range from None port range to None region None key None keyid None profile None kwargs locals return create network acl entry replace True **kwargs
@with setup prepare stdout def test output with success colorless with table runner Runner feature name 'success table' verbosity 3 no color True runner run assert stdout lines '\n Feature Table Success#tests/functional/output features/success table/success table feature 1\n\n Scenario Addtwonumbers\xe 2 \x 99 \xa 5 #tests/functional/output features/success table/success table feature 2\n Given Ihave 0 bucks#tests/functional/output features/success table/success table steps py 28 \n Andthat Ihavetheseitems #tests/functional/output features/success table/success table steps py 32 \n name price \n Porsche 200000 \n Ferrari 400000 \n When Isellthe" Ferrari"#tests/functional/output features/success table/success table steps py 42 \n Then Ihave 400000 bucks#tests/functional/output features/success table/success table steps py 28 \n Andmygaragecontains #tests/functional/output features/success table/success table steps py 47 \n name price \n Porsche 200000 \n\n 1 feature 1passed \n 1 scenario 1passed \n 5 steps 5passed \n'
def get value type kind if kind TEXT return APE Text Valueelif kind BINARY return APE Binary Valueelif kind EXTERNAL return APE Ext Valueraise Value Error 'unknownkind%r' % kind
def translated revision locale 'de' **kwargs parent rev revision is approved True parent rev save translation document parent parent rev document locale locale translation save new kwargs {'document' translation 'based on' parent rev}new kwargs update kwargs return revision **new kwargs
def migrate admission plugin facts facts if 'master' in facts if 'kube admission plugin config' in facts['master'] if 'admission plugin config' not in facts['master'] facts['master']['admission plugin config'] dict facts['master']['admission plugin config'] merge facts facts['master']['admission plugin config'] facts['master']['kube admission plugin config'] additive facts to overwrite [] protected facts to overwrite [] facts['master'] pop 'kube admission plugin config' None return facts
def test how to use as vm logger slogging configure ' DEBUG eth vm INFO' log slogging get logger 'eth vm' def run vm raise error False log trace 'op' pc 1 log trace 'op' pc 2 if raise error raise Exceptionrecorder slogging Log Recorder try run vm raise error True except log slogging get logger 'eth vm' for x in recorder pop records log info x pop 'event' **x
def to seconds td return td seconds + td days * 24 * 60 * 60
def register capabilities register driver init handler constants AGENT TYPE LINUXBRIDGE
def dumb css parser data import Index data find '@import' while import Index -1 data data[ 0 import Index] + data[ data find ' ' import Index + 1 ] import Index data find '@import' elements [x split '{' for x in data split '}' if '{' in x strip ]elements dict [ a strip dumb property dict b for a b in elements] return elements
def mut Counter individual if random random > 0 5 individual update [random choice ITEMS NAME ] else val random choice ITEMS NAME individual subtract [val] if individual[val] < 0 del individual[val]return individual
def list pkgs versions as list False **kwargs versions as list salt utils is true versions as list if any [salt utils is true kwargs get x for x in 'removed' 'purge desired' ] return {}if 'pkg list pkgs' in context if versions as list return context ['pkg list pkgs']else ret copy deepcopy context ['pkg list pkgs'] salt ['pkg resource stringify'] ret return retcmd ['opkg' 'list-installed']ret {}out salt ['cmd run'] cmd output loglevel 'trace' python shell False for line in salt utils itertools split out '\n' pkg name pkg version line split '-' salt ['pkg resource add pkg'] ret pkg name pkg version salt ['pkg resource sort pkglist'] ret context ['pkg list pkgs'] copy deepcopy ret if not versions as list salt ['pkg resource stringify'] ret return ret
def groebner seq ring method None if method is None method query 'groebner' groebner methods {'buchberger' buchberger 'f 5 b' f5 b}try groebner groebner methods[method]except Key Error raise Value Error "'%s'isnotavalid Groebnerbasesalgorithm validare'buchberger'and'f 5 b' " % method domain orig ring domain None if not domain has Field or not domain has assoc Field try orig ring ring ring clone domain domain get field except Domain Error raise Domain Error "can'tcomputea Groebnerbasisover%s" % domain else seq [s set ring ring for s in seq]G groebner seq ring if orig is not None G [g clear denoms [1 ] set ring orig for g in G]return G
def mnc 2 cum mnc mnc [1 ] + list mnc kappa [1 ]for nn m in enumerate mnc[ 1 ] n nn + 1 kappa append m for k in range 1 n kappa[n] - comb n - 1 k - 1 exact 1 * kappa[k] * mnc[ n - k ] return kappa[ 1 ]
def parse Lines chunk items {}for lineno line in chunk header data line split ' ' 1 header header lower items[header] lineno data strip return items
def manipulate Element Node element Node target derivation Rotate Derivation element Node '' if derivation rotate Tetragrid None print ' Warning rotate Tetragridwas Noneinrotatesonothingwillbedonefor 'print element Nodereturnmatrix set Attributes To Multiplied Tetragrid target derivation rotate Tetragrid
def is content authored by content user try return int content get 'user id' user id except Value Error Type Error return False
@pytest mark parametrize 'status expected' [ usertypes Load Status success url Url Type success usertypes Load Status success https url Url Type success https usertypes Load Status error url Url Type error usertypes Load Status warn url Url Type warn usertypes Load Status loading url Url Type normal usertypes Load Status none url Url Type normal ] def test on load status changed url widget status expected url widget set url Q Url 'www example com' url widget on load status changed status name assert url widget urltype expected
def register linter linter register checker Exceptions Checker linter
def handle calendar updates namespace id calendars log db session ids []added count 0updated count 0for calendar in calendars assert calendar uid is not None ' Gotremoteitemwithnulluid'local calendar db session query Calendar filter Calendar namespace id namespace id Calendar uid calendar uid first if local calendar is not None local calendar update calendar updated count + 1else local calendar Calendar namespace id namespace id local calendar update calendar db session add local calendar added count + 1db session commit ids append local calendar uid local calendar id log info 'syncedaddedandupdatedcalendars' added added count updated updated count return ids
def Web Template key defweb wdir if wdir is None try wdir fix webname key except wdir ''if not wdir wdir defwebif key key set wdir if not wdir return ''full dir real path sabnzbd DIR INTERFACES wdir full main real path full dir DEF MAIN TMPL logging info ' Webdiris%s' full dir if not os path exists full main if defweb DEF STDCONFIG return ''logging warning T ' Cannotfindwebtemplate %s tryingstandardtemplate' full main full dir real path sabnzbd DIR INTERFACES DEF STDINTF full main real path full dir DEF MAIN TMPL if not os path exists full main logging exception ' Cannotfindstandardtemplate %s' full dir panic tmpl full dir exit sab 1 return real path full dir 'templates'
def remove existing pidfile pidfile path try os remove pidfile path except OS Error as exc if exc errno errno ENOENT passelse raise
def netstat name sanitize name str name netstat infos salt ['cmd run'] 'netstat-nap' found infos []ret []for info in netstat infos splitlines if info find sanitize name -1 found infos append info ret extend [sanitize name found infos] return ret
def model top None documents []for score message in Datasheet load os path join PATH 'corpora' 'spam-apache csv' document vector Document message stemmer 'porter' top top type int score > 0 documents append document return vector Model documents
def insert query parameters None global dbsuccess Falsetry cursor db connection cursor if parameters is None cursor execute query else cursor execute query parameters db connection commit success Trueexcept success Falsereturn success
def arrays to list of tuples arrays colnames first array arrays[colnames[ 0 ]]return [tuple arrays[colname][i] for colname in colnames for i in range len first array ]
@library global functiondef tags to text tags return ' ' join [t slug for t in tags]
def clean destination recursive if destination[ 5] 's 3 //' rm args ['aws' 's 3 ' 'rm' '--quiet' destination]if recursive rm args append '--recursive' subprocess check call rm args elif recursive shutil rmtree destination else os remove destination
def get venv path dirs venv venv os path abspath venv sitedir get venv sitepackages venv sys path []addsitedir sys path sitedir return sys path
def bin Arr 2 int arr from numpy import packbitstmp 2 packbits arr astype int return sum val * 256 ** i for i val in enumerate tmp 2 [ -1 ]
def from File filename f open filename contents c Pickle load f f close if hasattr contents 'abort' contents abort return contents
def template funcs funcs {}for plugin in find plugins if plugin template funcs funcs update plugin template funcs return funcs
def write callback option opt str value parser * args ** kwargs if not hasattr parser values 'write' option dest 'write'option action 'store false'parser values write Falsefor in range 3 testphrase ' Yes Iwanttoenablewritesupport'response raw input ' Writesupportrequested Pleasetype"' + testphrase + '"belowprecisely case-sensitive \n' if response testphrase option action 'store true'parser values write Truereturnprint ' Writesupportdisabled '
def parse timestr parserinfo None **kwargs if isinstance timestr binary type timestr timestr decode if parserinfo return parser parserinfo parse timestr **kwargs else return DEFAULTPARSER parse timestr **kwargs
def continuous value String sys stdout write str value String return value String
def idp Xrds request return util render XRDS request [OPENID IDP 2 0 TYPE] [get View URL request endpoint ]
def get device name bdm if isinstance bdm obj base Nova Object return bdm device nameelse return bdm get 'device name' or bdm get 'mount device'
def calc at skew sequence a sequence count 'A' + sequence count 'a' t sequence count 'T' + sequence count 't' if a + t 0 return 0 0else return a - t / float a + t
def check string length value name None min length 0 max length None if not isinstance value six string types if name is None msg ' Theinputisnotastringorunicode' else msg '%sisnotastringorunicode' % name raise exception Invalid Input message msg if name is None name valueif len value < min length msg '% name shasaminimumcharacterrequirementof% min length s ' % {'name' name 'min length' min length} raise exception Invalid Input message msg if max length and len value > max length msg '% name shasmorethan% max length scharacters ' % {'name' name 'max length' max length} raise exception Invalid Input message msg
@register inclusion tag 'sponsors/templatetags/featured sponsor rotation html' def featured sponsor rotation return {'sponsors' Sponsor objects featured }
def Wigner Semicircle name R return rv name Wigner Semicircle Distribution R
@api versions wraps '2 10 ' '2 34 ' @utils arg '--user' metavar '<user-id>' default None help ' Listkey-pairsofspecifieduser ID Adminonly ' def do keypair list cs args keypairs cs keypairs list args user columns get keypairs list columns cs args utils print list keypairs columns
def safe urlencode params doseq 0 if IS PY 3 return urlencode params doseq if hasattr params u'items' params params items new params list for k v in params k k encode u'utf- 8 ' if isinstance v list tuple new params append k [force bytes i for i in v] else new params append k force bytes v return urlencode new params doseq
@pytest mark cmd@pytest mark django dbdef test list projects tutorial capfd call command 'list projects' out err capfd readouterr assert 'project 0 ' in out assert 'project 1 ' in out
def zen request project subproject lang translation get translation request project subproject lang search result unitdata get zen unitdata translation request if isinstance search result Http Response return search resultreturn render request u'zen html' {u'object' translation u'project' translation subproject project u'unitdata' unitdata u'search query' search result[u'query'] u'filter name' search result[u'name'] u'filter count' len search result[u'ids'] u'last section' search result[u'last section'] u'search id' search result[u'search id'] u'offset' search result[u'offset'] u'search form' search result[u'form'] u'update lock' translation lock user request user }
def identity obj return obj
def review published cb sender user review to submitter only request **kwargs siteconfig Site Configuration objects get current if siteconfig get u'mail send review mail' mail review review user to submitter only request
def resolve func spec try idx spec rindex ' ' mname spec[ idx]fname spec[ idx + 1 ]module import module mname return getattr module fname except Value Error return globals [spec]
@handle response format@treeio login required@module admin required 'treeio changes' def status add request response format 'html' if request POST form Change Set Status Form request user profile request POST if form is valid status form save return Http Response Redirect reverse 'changes status view' args [status id] else form Change Set Status Form request user profile context get default context request context update {'form' form} return render to response 'changes/status add' context context instance Request Context request response format response format
def encode path *components return u'/' + u'/' join urlquote x encode u'utf- 8 ' u'' decode u'ascii' for x in components
def zoom multi x zoom range 0 9 1 1 is random False row index 0 col index 1 channel index 2 fill mode 'nearest' cval 0 0 if len zoom range 2 raise Exception 'zoom rangeshouldbeatupleorlistoftwofloats Receivedarg ' zoom range if is random if zoom range[ 0 ] 1 and zoom range[ 1 ] 1 zx zy 1 1 print 'random zoom notzoomin/out'else zx zy np random uniform zoom range[ 0 ] zoom range[ 1 ] 2 else zx zy zoom rangezoom matrix np array [[zx 0 0] [0 zy 0] [0 0 1]] h w x[ 0 ] shape[row index] x[ 0 ] shape[col index] transform matrix transform matrix offset center zoom matrix h w results []for data in x results append apply transform data transform matrix channel index fill mode cval return np asarray results
def libvlc video set callbacks mp lock unlock display opaque print 'libvlc video set callbacks 1 'sys stdout flush f Cfunctions get 'libvlc video set callbacks' None or Cfunction 'libvlc video set callbacks' 1 1 1 1 1 None None Media Player Video Lock Cb Video Unlock Cb Video Display Cb ctypes c void p print 'libvlc video set callbacks 2 'sys stdout flush r f mp lock unlock display opaque print 'libvlc video set callbacks 3 'sys stdout flush return r
def validate since response cherrypy serving responselastmod response headers get ' Last- Modified' if lastmod status reason msg httputil valid status response status request cherrypy serving requestsince request headers get ' If- Unmodified- Since' if since and since lastmod if status > 200 and status < 299 or status 412 raise cherrypy HTTP Error 412 since request headers get ' If- Modified- Since' if since and since lastmod if status > 200 and status < 299 or status 304 if request method in 'GET' 'HEAD' raise cherrypy HTTP Redirect [] 304 else raise cherrypy HTTP Error 412
def get unit changes request unit id unit get object or 404 Unit pk int unit id unit check acl request return render request 'js/changes html' {'last changes' unit change set all [ 10 ] 'last changes url' urlencode unit translation get kwargs }
def lookup casstype casstype if isinstance casstype Cassandra Type Cassandra Type Type return casstypetry return parse casstype args casstype except Value Error Assertion Error Index Error as e raise Value Error " Don'tknowhowtoparsetypestring%r %s" % casstype e
def get vnc config spec client factory port password virtual machine config spec client factory create 'ns 0 Virtual Machine Config Spec' opt enabled client factory create 'ns 0 Option Value' opt enabled key ' Remote Display vnc enabled'opt enabled value 'true'opt port client factory create 'ns 0 Option Value' opt port key ' Remote Display vnc port'opt port value portopt pass client factory create 'ns 0 Option Value' opt pass key ' Remote Display vnc password'opt pass value passwordvirtual machine config spec extra Config [opt enabled opt port opt pass]return virtual machine config spec
def f list parser fl ref frame def flist iter for pair in fl obj force pairif isinstance obj Reference Frame yield obj ang vel in ref frame force elif isinstance obj Point yield obj vel ref frame force else raise Type Error ' Firstentryineachforcelistpairmustbeapointorframe ' if not fl vel list f list else unzip lambda l list zip *l if l[ 0 ] else [ ] vel list f list unzip list flist iter return vel list f list
def test keypoints censure color image unsupported error assert raises Value Error CENSURE detect np zeros 20 20 3
def label dataset dataset id label key label value project id None credentials default project id google auth default scopes ['https //www googleapis com/auth/bigquery'] session google auth transport requests Authorized Session credentials if project id is None project id default project idurl format 'https //www googleapis com/bigquery/v 2 /projects/{project id}/datasets/{dataset id}'response session patch url format format project id project id dataset id dataset id params {'fields' 'labels'} json {'labels' {label key label value}} response raise for status labels response json ['labels']print ' Updatedlabel"{}"withvalue"{}"' format label key labels[label key]
def compact Repr obj always Show None flag Names None field Names None section Names None if always Show is None always Show []if flag Names is None flag Names []if field Names is None field Names []if section Names is None section Names []set Flags []for name in flag Names if name in always Show or getattr obj name False True set Flags append name displayable Args get Displayable Arguments obj always Show field Names out ['<' obj class name ] + displayable Args if set Flags out append 'flags %s' % ' ' join set Flags for name in section Names section getattr obj name [] if section out append '%s %r' % name section out append '>' return '' join out
def load scores ba dir dir return File Binned Array Dir dir
@env catch exceptionsdef reload changes changes resources changes get changed resources moved get moved resources changes current env curbuf numberfor f in resources bufnr env var 'bufnr "%s" ' % f real path env goto buffer bufnr path env curbuf nameif f in moved path moved[f] real pathenv debug ' Reload' f real path path bufnr env goto file path 'e ' force True env message '%shasbeenchanged ' % f real path history True env goto buffer current
def first Result gen return list gen [0 ]
def exists name with settings hide 'running' 'stdout' 'warnings' warn only True return run 'getentgroup% name s' % locals succeeded
def test random state transfer class Graph def init self seed 123 self rng MRG Random Streams seed self y self rng uniform size 1 g1 Graph seed 123 f1 theano function [] g1 y g2 Graph seed 987 f2 theano function [] g2 y g2 rng rstate g1 rng rstatefor su 1 su 2 in zip g1 rng state updates g2 rng state updates su 2 [ 0 ] set value su 1 [ 0 ] get value numpy testing assert array almost equal f1 f2 decimal 6
def get package data package walk [ dirpath replace package + os sep '' 1 filenames for dirpath dirnames filenames in os walk package if not os path exists os path join dirpath ' init py' ]filepaths []for base filenames in walk filepaths extend [os path join base filename for filename in filenames] return {package filepaths}
def get location opts None provider None if opts is None opts {}ret opts get 'location' if ret is None and provider is not None ret provider get 'location' if ret is None ret get region from metadata if ret is None ret DEFAULT LOCATIO Nreturn ret
def load byte buf pos end pos + 1 if end > len buf raise Bad Rar File 'cannotloadbyte' return S BYTE unpack from buf pos [0 ] end
def compute node statistics context result model query context func count models Compute Node id func sum models Compute Node vcpus func sum models Compute Node memory mb func sum models Compute Node local gb func sum models Compute Node vcpus used func sum models Compute Node memory mb used func sum models Compute Node local gb used func sum models Compute Node free ram mb func sum models Compute Node free disk gb func sum models Compute Node current workload func sum models Compute Node running vms func sum models Compute Node disk available least base model models Compute Node read deleted 'no' first fields 'count' 'vcpus' 'memory mb' 'local gb' 'vcpus used' 'memory mb used' 'local gb used' 'free ram mb' 'free disk gb' 'current workload' 'running vms' 'disk available least' return dict field int result[idx] or 0 for idx field in enumerate fields
def file move session dc ref src file dst file LOG debug ' Movingfilefrom% src sto% dst s ' {'src' src file 'dst' dst file} vim session vimmove task session call method vim ' Move Datastore File Task' vim service content file Manager source Name str src file source Datacenter dc ref destination Name str dst file destination Datacenter dc ref session wait for task move task LOG debug ' Filemoved'
def analyze movie review filename language client language Client with open movie review filename 'r' as review file document language client document from html review file read annotations document annotate text include sentiment True include syntax False include entities False print result annotations
def do for subarray entry condition func path None if path is None path []if isinstance entry list if condition entry func entry path else for index item in enumerate entry do for subarray item condition func path + [index]
def write Output file Name should Analyze True skeinforge craft write Chain Text With Noun Message file Name 'inset' should Analyze
@require GE Tdef unsubscribe watch request watch id secret watch get object or 404 Watch pk watch id question watch content objectsuccess Falseif watch secret secret and isinstance question Question user or email watch user or watch email Question Reply Event stop notifying user or email question Question Solved Event stop notifying user or email question success Truereturn render request 'questions/unsubscribe watch html' {'question' question 'success' success}
def set defaults sql connection sqlite db max pool size None max overflow None pool timeout None cfg set defaults database opts connection sql connection cfg set defaults sqlite db opts sqlite db sqlite db if max pool size is not None cfg set defaults database opts max pool size max pool size if max overflow is not None cfg set defaults database opts max overflow max overflow if pool timeout is not None cfg set defaults database opts pool timeout pool timeout
def user exists username **kwargs if 'database' not in kwargs return Falsereturn len tsql query query "SELEC Tname FRO Msysusers WHER Ename '{ 0 }'" format username **kwargs 1
def restart cluster if TRAFFICCTL cmd traffic ctl 'cluster' 'restart' '--manager' else cmd traffic line '-M' log debug ' Running %s' cmd return subprocess cmd
def process multipart entity ib ''if 'boundary' in entity content type params ib entity content type params['boundary'] strip '"' if not re match '^[-~]{ 0 200 }[ -~]$' ib raise Value Error ' Invalidboundaryinmultipartform %r' % ib ib '--' + ib encode 'ascii' while True b entity readline if not b returnb b strip if b ib breakwhile True part entity part class from fp entity fp ib entity parts append part part process if part fp done break
def sysadmin context data dict return {'success' False 'msg' ' Notauthorized' }
def commit unless managed using None if using is None using DEFAULT DB ALIA Sconnection connections[using]connection commit unless managed
def over func *args **kwargs h ishold hold True func *args **kwargs hold h
def libs from seqids seq ids delim ' ' all libs set [i rsplit delim 1 [0 ] for i in seq ids] return all libs
@ Node subscribe 'before save' def validate permissions schema instance node instancecontributor ids set [user id for user in node contributors] permission ids set node permissions keys mismatched contributors contributor ids difference permission ids if mismatched contributors raise Validation Value Error ' Contributors{ 0 }missingfrom`permissions`onnode{ 1 }' format ' ' join mismatched contributors node id mismatched permissions permission ids difference contributor ids if mismatched permissions raise Validation Value Error ' Permissionkeys{ 0 }missingfrom`contributors`onnode{ 1 }' format ' ' join mismatched contributors node id
@pytest mark django dbdef test admin access client client login username 'admin' password 'admin' response client get ADMIN URL assert response status code 200
def get Matching Plugins name Path Dictionary xml Element matching Plugins []name Path Dictionary Copy name Path Dictionary copy for key in xml Element attribute Dictionary dot Index key find ' ' if dot Index > -1 key Until Dot key[ dot Index]if key Until Dot in name Path Dictionary Copy plugin Module archive get Module With Path name Path Dictionary Copy[key Until Dot] del name Path Dictionary Copy[key Until Dot]if plugin Module None matching Plugins append plugin Module return matching Plugins
def parse iso 8601 date str delimiter u'T' if date str is None return Nonem re search u' \\ [0 - 9 ]+ ? ? Z$ ? ?P<sign>\\+ - ?P<hours>[ 0 - 9 ]{ 2 } ? ?P<minutes>[ 0 - 9 ]{ 2 } $ ' date str if not m timezone datetime timedelta else date str date str[ - len m group 0 ]if not m group u'sign' timezone datetime timedelta else sign 1 if m group u'sign' u'+' else -1 timezone datetime timedelta hours sign * int m group u'hours' minutes sign * int m group u'minutes' date format u'%Y-%m-%d{ 0 }%H %M %S' format delimiter dt datetime datetime strptime date str date format - timezone return calendar timegm dt timetuple
def dijkstra shortest path graph id 1 id 2 heuristic None directed False def flatten list while len list > 0 yield list[ 0 ] list list[ 1 ]G adjacency graph directed directed heuristic heuristic q [ 0 id 1 ]visited set while True cost 1 n1 path heappop q if n1 not in visited visited add n1 if n1 id 2 return list flatten path [ -1 ] + [n 1 ] path n1 path for n2 cost 2 in G[n 1 ] items if n2 not in visited heappush q cost 1 + cost 2 n2 path
@with setup step runner environ def test can point undefined steps f Feature from string FEATURE 2 feature result f run scenario result feature result scenario results[ 0 ]assert equals len scenario result steps undefined 2 assert equals len scenario result steps passed 1 assert equals scenario result total steps 3 undefined 1 scenario result steps undefined[ 0 ]undefined 2 scenario result steps undefined[ 1 ]assert equals undefined 1 sentence ' Thenthisonehasnodefinition' assert equals undefined 2 sentence ' Andthisonealso'
def collection get options collection name **kwargs cluster cluster status **kwargs options {'collection config Name' cluster['collections'][collection name]['config Name'] 'router name' cluster['collections'][collection name]['router']['name'] 'replication Factor' int cluster['collections'][collection name]['replication Factor'] 'max Shards Per Node' int cluster['collections'][collection name]['max Shards Per Node'] 'auto Add Replicas' cluster['collections'][collection name]['auto Add Replicas'] is True }if 'rule' in cluster['collections'][collection name] options['rule'] cluster['collections'][collection name]['rule']if 'snitch' in cluster['collections'][collection name] options['snitch'] cluster['collections'][collection name]['rule']return options
def process XML Element xml Element group process Shape Triangle Mesh xml Element
def version string as tuple s v unpack version *s split u' ' if isinstance v micro string t v version info t v major v minor * splitmicro *v[ 2 ] if not v serial and v releaselevel and u'-' in v releaselevel v version info t * list v[ 0 3] + v releaselevel split u'-' return v
def to Roman n if not 0 < n < 5000 raise Out Of Range Error 'numberoutofrange mustbe 1 4999 'if int n n raise Not Integer Error 'decimalscannotbeconverted'result ''for numeral integer in roman Numeral Map while n > integer result + numeraln - integerreturn result
def fg 1 x return x + 2 * np exp -16 * x ** 2
@csrf exempt@require POS Tdef postpay callback request params request POST dict result process postpay callback params if result['success'] attempting upgrade request session get 'attempting upgrade' False if attempting upgrade if result['order'] has items Certificate Item course id result['order'] orderitem set all select subclasses 'certificateitem' [0 ] course idif course id course enrollment Course Enrollment get enrollment request user course id if course enrollment course enrollment emit event EVENT NAME USER UPGRADED request session['attempting upgrade'] Falseverify flow redirect get verify flow redirect result['order'] if verify flow redirect is not None return verify flow redirectreturn Http Response Redirect reverse 'shoppingcart views show receipt' args [result['order'] id] else request session['attempting upgrade'] Falsereturn render to response 'shoppingcart/error html' {'order' result['order'] 'error html' result['error html']}
def convert host to hex host ips []if host is not None for family ip in convert host to ip host hexip nf binascii b2 a hex socket inet pton family ip hexip hf ''for i in range 0 len hexip nf 8 ipgroup nf hexip nf[i i + 8 ]ipgroup hf socket ntohl int ipgroup nf base 16 hexip hf '%s% 08 X' % hexip hf ipgroup hf ips append family hexip hf return ips
def get output error code cmd out err p process handler cmd lambda p p communicate p if out err is None return '' '' p returncode out err out errreturn py 3 compat bytes to str out py 3 compat bytes to str err p returncode
@maintain deprecated ' Useauth is loggedin userinstead' def auth is registered user return auth is loggedin user
def list floatingips profile None conn auth profile return conn list floatingips
def safeiter it cleanup None ignore errors True def next while True try return it next except Stop Iteration raiseexcept traceback print exc it iter it while True yield next
def cmd binary *args binary salt utils which binary if not binary raise Command Not Found Error '{ 0 } commandnotfound' format binary cmd [binary] + list args return salt ['cmd run stdout'] [binary] + list args python shell False
@cli command name u'new' @click argument u'project directory' @common optionsdef new command project directory new new project directory
def instance type access add context flavor id project id return IMPL instance type access add context flavor id project id
def pytest configure config if config getoption '--qute-profile-subprocs' try shutil rmtree 'prof' except File Not Found Error pass
def equate Cylindrical Dot Radius point return Value original Radius abs point drop Axis if original Radius > 0 0 radius Multipler return Value / original Radius point x * radius Multiplerpoint y * radius Multipler
def package to path package return package replace ' ' '/'
def update head files config head map get heads map config contract head get contract head file path config expand head get expand head file path config with open contract head 'w+' as f f write head map[CONTRACT BRANCH] + '\n' with open expand head 'w+' as f f write head map[EXPAND BRANCH] + '\n' old head file get head file path config old heads file get heads file path config for file in old head file old heads file fileutils delete if exists file
def get system sass dirs system if system not in 'lms' 'cms' raise Value Error '"system"musteitherbe"lms"or"cms"' dirs []sass dir path system / 'static' / 'sass' css dir path system / 'static' / 'css' dependencies SASS LOOKUP DEPENDENCIES get system [] dirs append {'sass source dir' sass dir 'css destination dir' css dir 'lookup paths' dependencies + [ sass dir / 'partials' sass dir] } if system 'lms' dirs append {'sass source dir' path system / 'static' / 'certificates' / 'sass' 'css destination dir' path system / 'static' / 'certificates' / 'css' 'lookup paths' [ sass dir / 'partials' sass dir]} return dirs
def handle result line filename line No parts [p strip for p in line split ' ' 1 ]if len parts 2 fmt ' Invalidformatonline%dofaliasfile%s 'arg line No filename log err fmt % arg else user alias partsresult setdefault user strip [] extend map str strip alias split ' '
def resolve route path if path not in u'about' u'contact' context get page context from template path if context return contextreturn get page context from doctype path else context get page context from doctype path if context return contextreturn get page context from template path
def derive key secret salt iterations 1000 keylen 32 assert type secret in [six text type six binary type] assert type salt in [six text type six binary type] assert type iterations in six integer types assert type keylen in six integer types if type secret six text type secret secret encode 'utf 8 ' if type salt six text type salt salt encode 'utf 8 ' key pbkdf 2 secret salt iterations keylen return binascii b2 a base 64 key strip
def format otu map otu map otu id prefix for c in otu id prefix if not c isalnum and not c ' ' raise Value Error '%scharisnotallowedin OTUI Ds' % c for otu id seq ids in otu map yield '%s%s DCTB %s\n' % otu id prefix otu id ' DCTB ' join seq ids return
@csrf protectdef aifile edit request aifile name None editmode 'edit' if not test user authenticated request return login request next '/cobbler web/aifile/edit/file %s' % aifile name expired True if editmode 'edit' editable Falseelse editable Truedeleteable Falseaidata ''if aifile name is not None editable remote check access no fail request session['token'] 'modify autoinst' aifile name deleteable not remote is autoinstall in use aifile name request session['token'] aidata remote read autoinstall template aifile name request session['token'] t get template 'aifile edit tmpl' html t render Request Context request {'aifile name' aifile name 'deleteable' deleteable 'aidata' aidata 'editable' editable 'editmode' editmode 'version' remote extended version request session['token'] ['version'] 'username' username} return Http Response html
def thumbnails for file relative source path root None basedir None subdir None prefix None if root is None root settings MEDIA ROO Tif prefix is None prefix settings THUMBNAIL PREFI Xif subdir is None subdir settings THUMBNAIL SUBDI Rif basedir is None basedir settings THUMBNAIL BASEDIR source dir filename os path split relative source path thumbs path os path join root basedir source dir subdir if not os path isdir thumbs path return []files all thumbnails thumbs path recursive False prefix prefix subdir '' return files get filename []
def import dotted path path try module path member name path rsplit u' ' 1 module import module module path return getattr module member name except Value Error Import Error Attribute Error as e raise Import Error u' Couldnotimportthename %s %s' % path e
def crc 32 data return crc 32 data & 4294967295
def add capability capability source None limit access False image None restart False if salt utils version cmp grains ['osversion'] '10 ' -1 raise Not Implemented Error '`install capability`isnotavailableonthisversionof Windows {0 }' format grains ['osversion'] cmd ['DISM' '/ Quiet' '/ Image {0 }' format image if image else '/ Online' '/ Add- Capability' '/ Capability Name {0 }' format capability ]if source cmd append '/ Source {0 }' format source if limit access cmd append '/ Limit Access' if not restart cmd append '/ No Restart' return salt ['cmd run all'] cmd
def flip image return image transpose Image FLIP TOP BOTTOM
def add Vertex To Attribute Dictionary attribute Dictionary vertex if vertex x 0 0 attribute Dictionary['x'] str vertex x if vertex y 0 0 attribute Dictionary['y'] str vertex y if vertex z 0 0 attribute Dictionary['z'] str vertex z
def get base lun name volume base name extract provider location volume provider location 'base lun name' if base name is None or base name ' None' return volume namereturn base name
def upgrade available pkg refresh True return pkg in list upgrades refresh refresh
def make pythonzip global python filesd realpath join 'private' 'lib' 'python 2 7' def select fn if is blacklist fn return Falsefn realpath fn assert fn startswith d fn fn[len d ]if fn startswith '/site-packages/' or fn startswith '/config/' or fn startswith '/lib-dynload/' or fn startswith '/libpymodules so' return Falsereturn fnpython files [x for x in listfiles d if select x ]zfn join 'private' 'lib' 'python 27 zip' zf Zip File zfn 'w' for fn in python files afn fn[len d ]zf write fn afn zf close
def install ms 10 reactor None args kw {} d pyui init *args **kw if reactor is None from twisted internet import reactor gui Update reactor ms / 1000 0 return d
def get item request data usage key Usage Key from string data get 'locator' item modulestore get item usage key if not has course author access request user item location course key raise Permission Denied return item
def is casava v180 or later header line assert header line startswith '@' " Badfastqfilepassedasinput Headerlinemuststartwith'@' "fields header line split ' ' if len fields 10 and fields[ 7 ] in 'YN' return Truereturn False
def disk usage path return dict psutil disk usage path asdict
def envs containers opts get 'azurefs containers' [] return containers keys
def p parameter type list 2 t pass
def to numpy m **options dtype options get 'dtype' 'complex' if isinstance m Matrix Expr return sympy to numpy m dtype dtype elif isinstance m numpy ndarray return melif isinstance m scipy sparse matrix return m todense raise Type Error ' Expectedsympy/numpy/scipy sparsematrix got %r' % m
def build clonespec config spec object ref reloc spec template if reloc spec disk Move Type QUICK LINKED CLONE return vim vm Clone Spec template template location reloc spec config config spec snapshot object ref snapshot current Snapshot else return vim vm Clone Spec template template location reloc spec config config spec
def bytes to long s acc 0 Lunpack struct unpacklength len s if length % 4 extra 4 - length % 4 s '\x 00 ' * extra + s length length + extra for i in range 0 length 4 acc acc << 32 + unpack '>I' s[i i + 4 ] [0 ] return acc
def write Output file Name should Analyze True skeinforge craft write SVG Text With Noun Message file Name Bottom Repository should Analyze
def makepatch original modified patch {}for key original value in original iteritems modified value modified get key None if modified value is None patch[key] Noneelif original value modified value if type original value type {} patch[key] makepatch original value modified value else patch[key] modified valueelse passfor key in modified if key not in original patch[key] modified[key]return patch
def syntax text text language client language Client document language client document from text text tokens document analyze syntax for token in tokens print '{} {}' format token part of speech token text content
def image member create context values session None memb ref models Image Member image member update context memb ref values session session return image member format memb ref
def staff member required view func login url None if login url is None login url reverse lazy 'customer login' @wraps view func def checklogin request *args **kwargs if request user is active and request user is staff return view func request *args **kwargs if not request user is authenticated path request build absolute uri login scheme login netloc parse urlparse login url [ 2] current scheme current netloc parse urlparse path [ 2]if not login scheme or login scheme current scheme and not login netloc or login netloc current netloc path request get full path messages warning request ' Youmustlogintoaccessthispage' return redirect to login path login url REDIRECT FIELD NAME else raise Permission Deniedreturn checklogin
def try descendant S C R1 c list R2 N alpha x beta Y D C copy A dict D A dictif beta D n and beta < N D table append [ None] * len D A D p append beta D table[alpha][D A dict[x]] beta D table[beta][D A dict inv[x]] alpha D deduction stack append alpha x if not D process deductions check R1 c list[D A dict[x]] R1 c list[D A dict inv[x]] returnfor w in Y if not D scan check 0 w returnif first in class D Y descendant subgroups S D R1 c list x R2 N Y
def get mod num module number if len HOUSE keys > module mod HOUSE keys [module]if len HOUSE[mod] keys > number mod instance HOUSE[mod] keys [number]return mod mod instance return None None
@pytest fixturedef win registry helper Win Registry Helper helper add window 0 yield helper helper cleanup
def find objs selector context None return obj for obj in objs if match obj selector context
def delete volume module profitbricks if not isinstance module params get 'instance ids' list or len module params get 'instance ids' < 1 module fail json msg 'instance idsshouldbealistofvirtualmachineidsornames aborting' datacenter module params get 'datacenter' changed Falseinstance ids module params get 'instance ids' if not uuid match match datacenter datacenter list profitbricks list datacenters for d in datacenter list['items'] dc profitbricks get datacenter d['id'] if datacenter dc['properties']['name'] datacenter d['id']breakfor n in instance ids if uuid match match n delete volume module profitbricks datacenter volume changed Trueelse volumes profitbricks list volumes datacenter for v in volumes['items'] if n v['properties']['name'] volume id v['id'] delete volume module profitbricks datacenter volume id changed Truereturn changed
def test elemwise 3 shape 3 4 5 6 a tcn shared constructor theano asarray numpy random rand *shape dtype 'float 32 ' 'a' b tensor fvector new val a + b dimshuffle [2 0 3 1] new val * tensor exp 1 + b ** a dimshuffle [2 0 3 1] f pfunc [b] [] updates [ a new val ] mode mode with gpu has elemwise Falsefor i node in enumerate f maker fgraph toposort has elemwise has elemwise or isinstance node op tensor Elemwise assert not has elemwise f theano asarray numpy random rand 6 dtype 'float 32 '
def map download check request try layer request session['map status']if isinstance layer dict url '%srest/process/batch Download/status/%s' % ogc server settings LOCATION layer['id'] resp content http client request url 'GET' status resp statusif resp status 400 return Http Response content ' Somethingwentwrong' status status else content ' Something Wentwrong'status 400 except Value Error logger warn ' Usertriedtocheckstatus buthasnodownloadinprogress ' return Http Response content content status status
def photo f filename os path join os path dirname file ' ' f assert os path exists filename return filename
def get location vm None return opts get 'location' config get cloud config value 'location' vm or get configured provider opts default DEFAULT LOCATION search global False
def aug assign lhs op rhs if op + ' ' not in Relational Valid Relation Operator raise Value Error ' Unrecognizedoperator%s' % op return Relational Valid Relation Operator[ op + ' ' ] lhs rhs
@tf Register Shape ' Variable LSTM' def variable lstm shape op input shape op inputs[ 0 ] get shape with rank 4 state shape op inputs[ 1 ] get shape with rank 2 memory shape op inputs[ 2 ] get shape with rank 2 w m m shape op inputs[ 3 ] get shape with rank 3 batch size input shape[ 0 ] merge with state shape[ 0 ] batch size input shape[ 0 ] merge with memory shape[ 0 ] seq len input shape[ 1 ]gate num input shape[ 2 ] merge with w m m shape[ 1 ] output dim input shape[ 3 ] merge with state shape[ 1 ] output dim output dim merge with memory shape[ 1 ] output dim output dim merge with w m m shape[ 0 ] output dim output dim merge with w m m shape[ 2 ] return [[batch size seq len output dim] [batch size seq len gate num output dim] [batch size seq len output dim]]
def Get Metadata Sample client Create Client metadata client Get Metadata print ' Quota'print ' Total ' metadata quota bytes total textprint ' Used ' metadata quota bytes used textprint ' Trashed ' metadata quota bytes used in trash textprint ' Import/ Export'for input format in metadata import formats print ' Import ' input format source 'to' input format targetfor export format in metadata export formats print ' Export ' export format source 'to' export format targetprint ' Features'for feature in metadata features print ' Feature ' feature name textprint ' Upload Sizes'for upload size in metadata max upload sizes print ' Kind ' upload size kind upload size text
def MFI bar Ds count timeperiod - 2 ** 31 return call talib with hlcv bar Ds count talib MFI timeperiod
def concatcsv in files import os path as opfrom nipype utils filemanip import split filenameif not isinstance in files list return in filesif isinstance in files[ 0 ] list in files in files[ 0 ]first open in files[ 0 ] u'r' path name ext split filename in files[ 0 ] out name op abspath u'concat csv' out file open out name u'w' out file write first readline first close for in file in in files file to read open in file u'r' scrap first line file to read readline for line in file to read out file write line return out name
def p parameter type list opt 1 t pass
@pytest fixturedef context return Context TL Sv 1 METHOD
def typechain *args if len args 0 raise Type Error ' Noargumentswereprovided ' def annotation value '\n Returnsvalueeithertransformedwithoneofthefunctioninargs or\ncastedtooneoftypesinargs orthevalueitselfifitisinthe\nargs \n\n raises Value Error Raiseswhencannottransformvalueinanyoneof\nspecifiedways \n'for arg in args if value arg return valueif isinstance arg type and isinstance value arg return valuetry return arg value except Value Error Type Error passraise Value Error " Couldn'tconvertvalue{ r}toanyspecifiedtypeorfinditinspecifiedvalues " format value return annotation
def split dataset collection instance dataset collection instance collection type return split dataset collection dataset collection instance collection collection type
def network get all context project only 'allow none' return IMPL network get all context project only
def is dir url link link path url to path link url without fragment return os path isdir link path
def flatten list of lists return itertools chain *list of lists
def setup hass config from pylitejet import Lite Jeturl config[DOMAIN] get CONF PORT hass data['litejet system'] Lite Jet url hass data['litejet config'] config[DOMAIN]discovery load platform hass 'light' DOMAIN {} config if config[DOMAIN] get CONF INCLUDE SWITCHES discovery load platform hass 'switch' DOMAIN {} config discovery load platform hass 'scene' DOMAIN {} config return True
def virtual return virtualname
def scanvars reader frame locals import tokenize keyword vars lasttoken parent prefix value [] None None '' UNDEF for ttype token start end line in tokenize generate tokens reader if ttype tokenize NEWLINE breakif ttype tokenize NAME and token not in keyword kwlist if lasttoken ' ' if parent is not UNDEF value getattr parent token UNDEF vars append prefix + token prefix value else where value lookup token frame locals vars append token where value elif token ' ' prefix + lasttoken + ' ' parent valueelse parent prefix None '' lasttoken tokenreturn vars
def test psdestimator raw io read raw fif raw fname events read events event name picks pick types raw info meg True stim False ecg False eog False exclude 'bads' picks picks[ 1 13 3]epochs Epochs raw events event id tmin tmax picks picks baseline None 0 preload True epochs data epochs get data psd PSD Estimator 2 * np pi 0 np inf y epochs events[ -1 ]X psd fit transform epochs data y assert true X shape[ 0 ] epochs data shape[ 0 ] assert array equal psd fit epochs data y transform epochs data X assert raises Value Error psd fit epochs y assert raises Value Error psd transform epochs y
@hook command 'word' 'wordoftheday' autohelp False def wordoftheday text if not api key return ' Thiscommandrequiresan AP Ikeyfromwordnik com 'match re search ' \\d\\d\\d\\d-\\d\\d-\\d\\d ' text date ''if match date match group 1 url API URL + 'words json/word Of The Day' if date params {'api key' api key 'date' date}day dateelse params {'api key' api key}day 'today'json requests get url params params json if json word json['word']note json['note']pos json['definitions'][ 0 ]['part Of Speech']definition json['definitions'][ 0 ]['text']out ' Thewordfor\x 02 {}\x 02 is\x 02 {}\x 02 ' format day word out + '\x 0305 {} \x 0305 ' format pos out + '\x 0310 {}\x 0310 ' format note out + '\x 02 Definition \x 02 \x 0303 {}\x 0303 ' format definition return '' join out split else return " Sorry Icouldn'tfindthewordoftheday checkoutthisawesomeotterinstead{}" format 'http //i imgur com/pku Wl Wx gif'
def tiecorrect rankvals arr np sort rankvals idx np nonzero np r [ True arr[ 1 ] arr[ -1 ] True ] [0 ]cnt np diff idx astype np float 64 size np float 64 arr size return 1 0 if size < 2 else 1 0 - cnt ** 3 - cnt sum / size ** 3 - size
@get '/scan/<taskid>/status' def scan status taskid if taskid not in Data Store tasks logger warning '[%s] Invalidtask I Dprovidedtoscan status ' % taskid return jsonize {'success' False 'message' ' Invalidtask ID'} if Data Store tasks[taskid] engine process is None status 'notrunning'else status 'terminated' if Data Store tasks[taskid] engine has terminated is True else 'running' logger debug '[%s] Retrievedscanstatus' % taskid return jsonize {'success' True 'status' status 'returncode' Data Store tasks[taskid] engine get returncode }
def bot data in session *args **kwargs text args[ 0 ] if args else None if text is None returnif text strip in IDLE COMMAND session update session counters idle True returnkwargs pop 'options' None session player execute cmd text text session session session update session counters
def normalize path path return os path normcase os path realpath path
def create identity id type None username None password None tenant id None tenant name None api key None verify ssl None return context False if id type cls import identity id type else cls settings get 'identity class' if not cls raise exc Identity Class Not Defined ' Noidentityclasshasbeendefinedforthecurrentenvironment ' if verify ssl is None verify ssl get setting 'verify ssl' context cls username username password password tenant id tenant id tenant name tenant name api key api key verify ssl verify ssl if return context return contextelse global identityidentity context
@not implemented for 'directed' @not implemented for 'multigraph' def resource allocation index G ebunch None def predict u v return sum 1 / G degree w for w in nx common neighbors G u v return apply prediction G predict ebunch
def repeat stmt 'pass' setup 'pass' timer default timer repeat default repeat number default number return Timer stmt setup timer repeat repeat number
def translate pattern pattern anchor 1 prefix None is regex 0 if is regex if type pattern is String Type return re compile pattern else return patternif pattern pattern re glob to re pattern else pattern re ''if prefix is not None prefix re glob to re prefix [0 -1 ]pattern re '^' + os path join prefix re ' *' + pattern re elif anchor pattern re '^' + pattern re return re compile pattern re
def test traverse postorder duplicate subtrees subtree ET u'+' ET 1 ET 2 tree ET u'+' subtree subtree traversal [n value for n in tree traverse postorder ]assert traversal [1 2 u'+' 1 2 u'+' u'+']
def get Path By Key default Path element Node key if key not in element Node attributes return default Pathword str element Node attributes[key] strip evaluated Link Value get Evaluated Link Value element Node word if evaluated Link Value class list return get Path By List evaluated Link Value element Node Object get Element Node Object evaluated Link Value if element Node Object None return default Pathreturn element Node Object get Paths [0 ]
def compare search obj obj a obj b assert num difference obj a obj b 0 compare attrs obj a obj b list obj a dict if not isinstance obj a Search IO HSP Fragment assert len obj a len obj b 'length %ivs%ifor%rvs%r' % len obj a len obj b obj a obj b for item a item b in zip obj a obj b assert compare search obj item a item b return True
def get plugin manager return get config pluginmanager
def system state change module project quota output changes required quota change request system state change details module project quota output if changes required return Trueelse return False
def itemmap func d factory dict rv factory rv update map func iteritems d return rv
def matchmark colitem markexpr return eval markexpr {} Mark Mapping colitem keywords
def fields 2 csv head fields prefix '' line []for field subfields in fields iteritems if subfields is True or callable subfields line append prefix + field elif isinstance subfields dict line + fields 2 csv head subfields prefix prefix + field + ' ' return line
def display g title pos nx circular layout g plt figure plt title title nx draw g pos nx draw networkx edge labels g pos font size 20
def check group auth context data dict if not data dict return Truemodel context['model']user context['user']pkg context get 'package' api version context get 'api version' or '1 ' group blobs data dict get 'groups' [] groups set for group blob in group blobs if isinstance group blob dict id group blob get 'id' or group blob get 'name' if not id continueelse id group blobgrp model Group get id if grp is None raise logic Not Found ' Groupwasnotfound ' groups add grp if pkg pkg groups pkg get groups groups groups - set pkg groups for group in groups if not authz has user permission for group or org group id user 'update' return Falsereturn True
def auth traps enabled name status True ret {'name' name 'changes' {} 'comment' str 'result' None}vname ' Enable Authentication Traps'current status salt ['win snmp get auth traps enabled'] if status current status ret['comment'] '{ 0 }alreadycontainstheprovidedvalue ' format vname ret['result'] Trueelif opts ['test'] ret['comment'] '{ 0 }willbechanged ' format vname ret['changes'] {'old' current status 'new' status}else ret['comment'] ' Set{ 0 }tocontaintheprovidedvalue ' format vname ret['changes'] {'old' current status 'new' status}ret['result'] salt ['win snmp set auth traps enabled'] status status return ret
def make sample node table bt mf dict sids bt ids header '# Node ID DCTB Node Type DCTB Abundance DCTB ' + ' DCTB ' join mf dict[sids[ 0 ]] keys lines [header] + [ '%s DCTB sample DCTB %s DCTB ' % sid bt data sid axis 'sample' sum + ' DCTB ' join mf dict[sid] values for sid in sids] return lines
def list compatible workflows get compatible feedback alfred Feedback for w in workflows subtitle 'v' + unicode w version + '' + w description feedback add Item title w name subtitle subtitle icon w icon valid 'no' if feedback is Empty feedback add Item title ' Nocompatibleworkflowsfound' valid 'no' autocomplete '' else feedback add Item title ' Goback' valid 'no' icon 'back png' autocomplete '' feedback output
def class instances from soap enveloped saml thingies text modules try envelope Element Tree fromstring text except Exception as exc raise Xml Parse Error '%s' % exc assert envelope tag '{%s} Envelope' % soapenv NAMESPACE assert len envelope > 1 env {'header' [] 'body' None}for part in envelope if part tag '{%s} Body' % soapenv NAMESPACE assert len part 1 env['body'] instanciate class part[ 0 ] modules elif part tag '{%s} Header' % soapenv NAMESPACE for item in part env['header'] append instanciate class item modules return env
def get tftp image info instance instance type image info {'kernel' [ None None] 'ramdisk' [ None None] 'deploy kernel' [ None None] 'deploy ramdisk' [ None None]}try image info['kernel'][ 0 ] str instance['kernel id'] image info['ramdisk'][ 0 ] str instance['ramdisk id'] image info['deploy kernel'][ 0 ] get deploy aki id instance type image info['deploy ramdisk'][ 0 ] get deploy ari id instance type except Key Error as e passmissing labels []for label in image info keys uuid path image info[label]if not uuid missing labels append label else image info[label][ 1 ] os path join CONF baremetal tftp root instance['uuid'] label if missing labels raise exception Nova Exception ' Cannotactivate PX Ebootloader Thefollowingbootparameterswerenotpassedtobaremetaldriver %s' % missing labels return image info
def get settings priority priority if isinstance priority six string types return SETTINGS PRIORITIES[priority]else return priority
def cubehelix gamma 1 0 s 0 5 r -1 5 h 1 0 def get color function p0 p1 def color x xg x ** gamma a h * xg * 1 - xg / 2 phi 2 * np pi * s / 3 + r * x return xg + a * p0 * np cos phi + p1 * np sin phi return colorreturn {u'red' get color function -0 14861 1 78277 u'green' get color function -0 29227 -0 90649 u'blue' get color function 1 97294 0 0 }
def prepare fancyarrow dpi cor test fig 2 plt figure u'fancyarrow dpi cor test' figsize 4 3 dpi 50 ax fig 2 add subplot 111 ax set xlim [0 1] ax set ylim [0 1] ax add patch mpatches Fancy Arrow Patch pos A 0 3 0 4 pos B 0 8 0 6 lw 3 arrowstyle u'->' mutation scale 100 return fig 2
def get configured projects user Abstract Node apps get model 'osf Abstract Node' configured project ids set user subscriptions get all user subscriptions user for subscription in user subscriptions if subscription is None continuenode subscription ownerif not isinstance node Abstract Node or subscription none filter id user id exists and not node parent id or node id not in user notifications configured or node is collection continuewhile node parent id and not node is deleted node node parent nodeif not node is deleted configured project ids add node id return list configured project ids
def spawn public stream args keyword None if keyword if keyword[ 0 ] '#' keyword keyword[ 1 ]args track keywords keywordg['keyword'] keywordelse g['keyword'] ' Global'g['PREFIX'] u2 str emojize format prefix keyword g['keyword'] g['listname'] ''th threading Thread target stream args c['PUBLIC DOMAIN'] args th daemon Trueth start
@app route '/' def index return Markup '<metaproperty "qc admins"content "226526754150631611006375 "/>'
def setpassword name password return update name name password password
def verify indices all unique obj axis names [ 'index' 'index' 'columns' 'items' 'major axis' 'minor axis' ][ obj ndim - 1 ]for axis name index in zip axis names obj axes if index is unique continueraise Value Error ' Duplicateentriesin{type} {axis} {dupes} ' format type type obj name axis axis name dupes sorted index[index duplicated ] return obj
def kill all jobs ret []for data in running ret append signal job data['jid'] salt SIGKILL return ret
def body request return Http Response request body
def wait name sfun None return {'name' name 'changes' {} 'result' True 'comment' ''}
def continuation tokens cli width return [ Token u' ' * width - 1 + u'' ]
def cpu has flags flags cpu info get cpu info if not isinstance flags list flags [flags]for flag in flags if not list grep cpu info ' *%s *' % flag return Falsereturn True
def sampled sequence loss inputs targets weights loss function average across timesteps True average across batch True name None with tf op scope inputs + targets + weights name 'sampled sequence loss' cost tf reduce sum sequence loss by example inputs targets weights loss function average across timesteps average across timesteps if average across batch batch size tf shape targets[ 0 ] [0 ]return cost / tf cast batch size tf float 32 else return cost
def virtual if grains ['kernel'] ' Linux' and salt utils systemd booted context if salt utils systemd version is None log error 'nspawn Unabletodeterminesystemdversion' else return virtualname return False ' Thenspawnexecutionmodulefailedtoload onlyworkonsystemsthathavebeenbootedwithsystemd '
def check for setattr instance module instance get parent until try stmts module used names['setattr']except Key Error return Falsereturn any instance start pos < stmt start pos < instance end pos for stmt in stmts
def parse value resource try document json loads value except document valuetry document serialize document resource except passreturn document
def get Add Indexed Grid grid vertexes z indexed Grid []for row in grid indexed Row []indexed Grid append indexed Row for point Complex in row vector 3 index Vector 3 Index len vertexes point Complex real point Complex imag z indexed Row append vector 3 index vertexes append vector 3 index return indexed Grid
def delete uuid timings []errors []for index in range 0 constants NUM SAMPLES start time time try memcache delete uuid + str index total time time time - start except Exception as exception logging exception exception errors append str exception total time 0timings append total time * constants SECONDS TO MILLI return timings errors
def create element tag attributes None sub elements None if tag elem Xml ET Element tag if attributes for k v in attributes items elem set k v if sub elements for k v in sub elements items if v if k 'packages' for v tuple in v sub elem Xml ET Sub Element elem 'package' sub elem name sub elem version v tuplesub elem set 'name' sub elem name sub elem set 'version' sub elem version elif isinstance v list sub elem Xml ET Sub Element elem k for v tuple in v if len v tuple 2 v tag v tuple[ 0 ]v text v tuple[ 1 ]if v text v elem Xml ET Sub Element sub elem v tag v elem text v textelse sub elem Xml ET Sub Element elem k sub elem text vreturn elemreturn None
def stop name call None datacenter id get datacenter id conn get conn node get node conn name conn stop server datacenter id datacenter id server id node['id'] return True